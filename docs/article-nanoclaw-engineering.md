# NanoClawï¼šSkillsåè®®é©±åŠ¨çš„AI Agentæ¶æ„é©æ–°

## ä¸€ã€å¼•è¨€ï¼šä¸åªæ˜¯"å°"

å½“æˆ‘ä»¬è°ˆè®ºAI Agentå¼€å‘å·¥å…·æ—¶ï¼Œä¸€ä¸ªæ— æ³•å›é¿çš„é—®é¢˜æ˜¯**ä¿¡ä»»å±æœº**ã€‚

ä»¥OpenClawä¸ºä¾‹â€”â€”è¿™ä¸ªä»¤äººå°è±¡æ·±åˆ»çš„é¡¹ç›®æ‹¥æœ‰è¿‘50ä¸‡è¡Œä»£ç ã€53ä¸ªé…ç½®æ–‡ä»¶ã€70å¤šä¸ªä¾èµ–é¡¹ã€‚å¯¹äºä¸€ä¸ªéœ€è¦æ¥å…¥ä½ çš„WhatsAppã€è®¿é—®ä½ çš„ä¸ªäººæ•°æ®ã€åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»£ç çš„ç³»ç»Ÿï¼Œä½ çœŸçš„èƒ½ç†è§£å®ƒçš„æ¯ä¸€è¡Œå—ï¼Ÿå½“æç¤ºè¯æ³¨å…¥æ”»å‡»å‘ç”Ÿæ—¶ï¼Œä½ çœŸçš„æœ‰ä¿¡å¿ƒè¯´"æˆ‘çŸ¥é“è¿™ä¸ªç³»ç»Ÿçš„è¾¹ç•Œåœ¨å“ªé‡Œ"å—ï¼Ÿ

NanoClawç»™å‡ºäº†ä¸€ä¸ªä¸åŒçš„ç­”æ¡ˆã€‚å®ƒç”¨çº¦500è¡ŒTypeScriptæ ¸å¿ƒä»£ç ï¼Œå®ç°äº†OpenClawçš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä½†NanoClawçš„é©å‘½æ€§**ä¸åœ¨äº"å°"æœ¬èº«**â€”â€”è€Œåœ¨äºå®ƒå¦‚ä½•é€šè¿‡**Skillsåè®®**é‡æ–°å®šä¹‰äº†åŠŸèƒ½æ‰©å±•çš„æ–¹å¼ï¼Œä»è€Œå½»åº•æ”¹å˜äº†æˆ‘ä»¬å¯¹"è½¯ä»¶å®šåˆ¶"çš„ç†è§£ã€‚

æœ¬æ–‡ä¸ä¼šç”¨å®å¤§çš„å™äº‹æ¥åŒ…è£…è¿™ä¸ªç³»ç»Ÿã€‚æˆ‘ä»¬å°†æ·±å…¥åˆ°ä»£ç å±‚é¢ï¼Œçœ‹çœ‹NanoClawå¦‚ä½•ç”¨æç®€çš„æ¶æ„å®ç°ç‰©ç†çº§çš„å®‰å…¨éš”ç¦»ï¼Œä»¥åŠæ›´é‡è¦çš„â€”â€”**Skillsåè®®å¦‚ä½•è®©æˆ‘ä»¬ä»"ä»£ç åº“è†¨èƒ€"èµ°å‘"æŒ‰éœ€è‡ªä¿®æ”¹"**ã€‚

## äºŒã€æ ¸å¿ƒæ¶æ„ç®€æï¼šæç®€èƒŒåçš„è®¾è®¡åŸåˆ™

NanoClawçš„æ ¸å¿ƒæ¶æ„å¯ä»¥ç”¨ä¸‰ä¸ªå…³é”®è¯æ¦‚æ‹¬ï¼š**å®¹å™¨éš”ç¦»**ã€**å¼‚æ­¥æŒä¹…åŒ–**ã€**é˜²å¾¡æ€§ç¼–ç¨‹**ã€‚è®©æˆ‘ä»¬ç®€è¦çœ‹çœ‹æ¯ä¸ªè®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ã€‚

### 2.1 å®¹å™¨éš”ç¦»ï¼šç‰©ç†çº§çš„å®‰å…¨è¾¹ç•Œ

NanoClawæ‘’å¼ƒäº†ä¼ ç»Ÿçš„åº”ç”¨å±‚æƒé™æ¨¡å‹ã€‚å®ƒçš„å®‰å…¨å‡è®¾æ˜¯ï¼š**æ‰€æœ‰å¤–éƒ¨è¾“å…¥éƒ½æ˜¯ä¸å¯ä¿¡çš„**ã€‚

æ¯æ¬¡Agentè°ƒç”¨æ—¶ï¼ŒNanoClawéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Linuxå®¹å™¨ã€‚å…³é”®è®¾è®¡åœ¨`src/container-runner.ts`çš„`buildVolumeMounts`å‡½æ•°ä¸­ï¼š

```typescript
if (isMain) {
  // Main groupè·å¾—é¡¹ç›®æ ¹ç›®å½•åªè¯»æƒé™
  mounts.push({
    hostPath: projectRoot,
    containerPath: '/workspace/project',
    readonly: true,  // å…³é”®ï¼šåªè¯»
  });
} else {
  // å…¶ä»–ç¾¤ç»„åªèƒ½è®¿é—®è‡ªå·±çš„æ–‡ä»¶å¤¹
  mounts.push({
    hostPath: groupDir,
    containerPath: '/workspace/group',
    readonly: false,
  });
}
```

**æ ¸å¿ƒåŸåˆ™**ï¼šæ˜¾å¼æŒ‚è½½ + æœ€å°æƒé™ã€‚åªæœ‰æ˜ç¡®æŒ‚è½½çš„ç›®å½•æ‰èƒ½è®¿é—®ï¼Œä¸”é»˜è®¤åªè¯»ã€‚å³ä½¿æŸä¸ªç¾¤ç»„å†…çš„Agentè¢«æ¶æ„è¯±å¯¼ï¼Œä¹Ÿæ— æ³•è¯»å–å…¶ä»–ç¾¤ç»„çš„éšç§æ•°æ®â€”â€”è¿™æ˜¯æ“ä½œç³»ç»Ÿçº§åˆ«çš„æƒé™å¢™ï¼Œä¸æ˜¯åº”ç”¨å±‚çš„å®‰å…¨å‡è®¾ã€‚

### 2.2 å¼‚æ­¥æ¶ˆæ¯å¾ªç¯ï¼šè§£è€¦ä¸å¯é 

NanoClawéœ€è¦è§£å†³ä¸€ä¸ªç»å…¸çŸ›ç›¾ï¼šWhatsAppæ¶ˆæ¯æ˜¯**é«˜é¢‘ã€ä¸å¯é **çš„å³æ—¶é€šè®¯è¾“å…¥ï¼Œè€ŒClaude Agent SDKè°ƒç”¨æ˜¯**é«˜å»¶è¿Ÿã€é«˜æ¶ˆè€—**çš„å¤§æ¨¡å‹æ¨ç†ã€‚ç›´æ¥è€¦åˆä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€APIé™æµã€ç³»ç»Ÿä¸ç¨³å®šã€‚

è§£è€¦æ–¹æ¡ˆæ˜¯å¼•å…¥SQLiteä½œä¸ºæŒä¹…åŒ–å±‚ï¼š

```
WhatsApp -> SQLite(æŒä¹…åŒ–) -> Polling Loop -> Container(Claude SDK) -> Response
```

å…³é”®è®¾è®¡å†³ç­–åœ¨`src/index.ts`çš„`startMessageLoop`ä¸­ï¼š

1. **ç«‹å³advance cursor**ï¼šæ¶ˆæ¯ä¸€æ—¦è¯»å–å°±æ›´æ–°`lastTimestamp`ï¼Œé˜²æ­¢å´©æºƒé‡å¯åé‡å¤å¤„ç†
2. **Cursoråˆ†ç¦»**ï¼š`lastTimestamp`ï¼ˆå·²è¯»æ¶ˆæ¯æ¸¸æ ‡ï¼‰ä¸`lastAgentTimestamp`ï¼ˆå·²å¤„ç†æ¶ˆæ¯æ¸¸æ ‡ï¼‰åˆ†ç¦»ï¼Œæ”¯æŒétriggeræ¶ˆæ¯ç´¯ç§¯ä¸ºä¸Šä¸‹æ–‡
3. **Crash Recovery**ï¼š`recoverPendingMessages`åœ¨å¯åŠ¨æ—¶æ£€æŸ¥æœªå¤„ç†æ¶ˆæ¯

è¿™ç§è®¾è®¡è®©NanoClawå¯ä»¥åœ¨å´©æºƒåæ— ç¼æ¢å¤ï¼Œä¿è¯æ¯æ¡æ¶ˆæ¯éƒ½è¢«å¤„ç†ä¸”åªè¢«å¤„ç†ä¸€æ¬¡ã€‚

### 2.3 Issue #30çš„æ•™è®­ï¼šmaxTurnsä¸é˜²å¾¡æ€§ç¼–ç¨‹

2024å¹´ï¼ŒNanoClawé‡åˆ°ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒäº‹æ•…ï¼šç”¨æˆ·è¦æ±‚ç”¨èŠ¬å…°è¯­è®¾ç½®ä¸€ä¸ªæé†’ï¼Œç»“æœåœ¨32ç§’å†…è¿ç»­æ”¶åˆ°äº†21æ¡ä¸€æ¨¡ä¸€æ ·çš„ç¡®è®¤æ¶ˆæ¯ï¼Œä¸”AIåœ¨å¾ªç¯ä¸­é€”å®Œå…¨ä¸¢å¤±äº†èŠ¬å…°è¯­çš„ä¸Šä¸‹æ–‡ã€‚

**æ ¹æœ¬åŸå› **ï¼š`container/agent-runner/src/index.ts`åœ¨è°ƒç”¨SDKçš„`query()`å‡½æ•°æ—¶ï¼Œæœªè®¾ç½®`maxTurns`å‚æ•°ï¼š

```typescript
// é”™è¯¯ï¼šæœªè®¾ç½®maxTurns
for await (const message of query({ prompt, options: {} })) {
  // å¤„ç†æ¶ˆæ¯...
}
```

**é—®é¢˜æœºåˆ¶**ï¼š
1. Agentè°ƒç”¨å‘é€æ¶ˆæ¯å·¥å…·
2. å·¥å…·è¿”å›"æ¶ˆæ¯å·²åŠ å…¥äº¤ä»˜é˜Ÿåˆ—"çš„æ¨¡ç³Šå“åº”
3. SDKè§£è¯»ä¸º"ä»»åŠ¡æœªå®Œæˆï¼Œéœ€ç»§ç»­"
4. æ— `maxTurns`é™åˆ¶ â†’ æ— é™å¾ªç¯
5. æ¯æ¬¡å¾ªç¯æ¶ˆè€—Token â†’ æ—§å¯¹è¯å†å²è¢«æŒ¤å‡ºä¸Šä¸‹æ–‡ â†’ èŠ¬å…°è¯­æŒ‡ä»¤ä¸¢å¤±

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// æ­£ç¡®ï¼šç¡¬æ€§è¾¹ç•Œ
for await (const message of query({
  prompt,
  options: { maxTurns: 10 }  // æœ€å¤š10è½®äº¤äº’
})) {
  // å¤„ç†æ¶ˆæ¯...
}
```

**å·¥ç¨‹æ•™è®­**ï¼šåœ¨ä¸ç¡®å®šçš„æ¨¡å‹æ¨ç†è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»åœ¨ä»£ç å±‚é¢å¼ºåˆ¶æ–½åŠ ç¡®å®šæ€§çš„å®‰å…¨ç»ˆæ­¢æ¡ä»¶ã€‚æ°¸è¿œä¸è¦å‡è®¾AIä¼šè‡ªå·±çŸ¥é“ä½•æ—¶åœæ­¢ã€‚

---

## ä¸‰ã€Skillsåè®®ï¼šä»PRåˆ°è‡ªä¿®æ”¹ä»£ç ã€æ ¸å¿ƒç« èŠ‚ã€‘

å¦‚æœè¯´å®¹å™¨éš”ç¦»å’Œå¼‚æ­¥æ¶ˆæ¯å¾ªç¯æ˜¯NanoClawçš„"åŸºæœ¬åŠŸ"ï¼Œé‚£ä¹ˆ**Skillsåè®®**å°±æ˜¯å®ƒçš„"ç‹¬é—¨ç»æŠ€"ã€‚è¿™ä¸€ç« èŠ‚å°†æ·±å…¥å‰–æSkillsåè®®çš„è®¾è®¡å“²å­¦ã€å®ç°æœºåˆ¶ä¸è¡Œä¸šæ„ä¹‰ã€‚

### 3.1 å¼€æºåä½œæ¨¡å¼çš„èŒƒå¼å±æœº

#### 3.1.1 ä¼ ç»Ÿæ¨¡å¼çš„ç»“æ„æ€§å›°å¢ƒ

è®©æˆ‘ä»¬ç›´é¢ä¸€ä¸ªè¢«é•¿æœŸå¿½è§†çš„é—®é¢˜ï¼š**ç°ä»£å¼€æºè½¯ä»¶çš„å¤æ‚æ€§å±æœº**ã€‚

å‡è®¾ä½ æƒ³è¦ä¸ºä¸€ä¸ªAI Agentå¹³å°æ·»åŠ Telegramæ”¯æŒã€‚åœ¨ä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œè¿™æ„å‘³ç€ï¼š

**ä»£ç å±‚é¢çš„è†¨èƒ€**ï¼š
```typescript
// 1. æ–°å¢adapterå±‚
src/adapters/telegram/
â”œâ”€â”€ index.ts           # å…¥å£
â”œâ”€â”€ client.ts          # APIå®¢æˆ·ç«¯å°è£…
â”œâ”€â”€ types.ts           # ç±»å‹å®šä¹‰
â”œâ”€â”€ transformers.ts    # æ¶ˆæ¯æ ¼å¼è½¬æ¢
â””â”€â”€ errors.ts          # é”™è¯¯å¤„ç†

// 2. ä¾èµ–ç®¡ç†
package.json:
{
  "dependencies": {
    "telegraf": "^4.16.0",      # æ–°å¢
    "@types/telegraf": "^4.0.0"  # æ–°å¢
  }
}

// 3. é…ç½®å±‚è†¨èƒ€
src/config/channels.ts:
export interface ChannelConfig {
  whatsapp: WhatsAppConfig;
  telegram?: TelegramConfig;  # æ–°å¢
  slack?: SlackConfig;        # å¦‚æœä»¥ååŠ 
  discord?: DiscordConfig;    # å¦‚æœä»¥ååŠ 
  // ... æ¯åŠ ä¸€ä¸ªå¹³å°ï¼Œè¿™é‡Œå°±å¤šä¸€ä¸ªå¯é€‰å­—æ®µ
}

// 4. æ¡ä»¶è·¯ç”±é€»è¾‘
src/router.ts:
export function createRouter(config: ChannelConfig) {
  const routes = [];

  if (config.whatsapp) {
    routes.push(new WhatsAppRoute(config.whatsapp));
  }
  if (config.telegram) {      # æ–°å¢æ¡ä»¶åˆ†æ”¯
    routes.push(new TelegramRoute(config.telegram));
  }
  // ... æ¯åŠ ä¸€ä¸ªå¹³å°ï¼Œå°±å¤šä¸€ä¸ªifè¯­å¥

  return routes;
}
```

**é…ç½®å±‚é¢çš„è”“å»¶**ï¼š
```yaml
# config.yaml - éšç€å¹³å°å¢åŠ ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šæ— é™è†¨èƒ€
channels:
  whatsapp:
    enabled: true
    api_key: ${WHATSAPP_API_KEY}
    webhook_url: ${WHATSAPP_WEBHOOK_URL}

  telegram:
    enabled: false  # ç”¨æˆ·ä¸éœ€è¦ï¼Œä½†é…ç½®é¡¹ä»åœ¨
    api_key: ${TELEGRAM_API_KEY}
    polling_interval: 30

  slack:
    enabled: false  # å¦ä¸€ä¸ªä¸éœ€è¦ä½†å­˜åœ¨çš„é…ç½®
    bot_token: ${SLACK_BOT_TOKEN}
    signing_secret: ${SLACK_SIGNING_SECRET}

  discord:
    enabled: false
    bot_token: ${DISCORD_BOT_TOKEN}
    # ... æ¯åŠ ä¸€ä¸ªå¹³å°ï¼Œå°±å¤šä¸€ç»„é…ç½®

# å…¨å±€é…ç½® - éšç€åŠŸèƒ½å¢åŠ ï¼Œè¿™é‡Œä¹Ÿä¼šè†¨èƒ€
features:
  voice_message: true
  file_attachment: true
  image_recognition: false
  scheduled_tasks: true
  # ... æ¯ä¸ªæ–°åŠŸèƒ½éƒ½å¢åŠ ä¸€ä¸ªå¼€å…³
```

**æµ‹è¯•çŸ©é˜µçš„çˆ†ç‚¸**ï¼š
```typescript
// æµ‹è¯•åœºæ™¯ = å¹³å°æ•° Ã— åŠŸèƒ½æ•° Ã— é…ç½®ç»„åˆ
// 3ä¸ªå¹³å° Ã— 10ä¸ªåŠŸèƒ½ Ã— 5ç§é…ç½® = 150ä¸ªæµ‹è¯•åœºæ™¯
// å¢åŠ åˆ°10ä¸ªå¹³å° = 500ä¸ªæµ‹è¯•åœºæ™¯
// è¿™ä¸æ˜¯çº¿æ€§çš„ï¼Œè€Œæ˜¯æŒ‡æ•°çº§çš„å¤æ‚åº¦å¢é•¿

describe('Message Routing', () => {
  // ä¸ºæ¯ä¸ªå¹³å°éƒ½è¦å†™ç±»ä¼¼çš„æµ‹è¯•
  describe('WhatsApp', () => { /* ... */ });
  describe('Telegram', () => { /* ... */ });
  describe('Slack', () => { /* ... */ });
  // æ¯åŠ ä¸€ä¸ªå¹³å°ï¼Œå°±å¤šä¸€ä¸ªdescribeå—
});
```

**è®¤çŸ¥è´Ÿè·çš„ç´¯ç§¯**ï¼š

å‡è®¾ä½ æ˜¯ä¸€ä¸ªæ–°åŠ å…¥çš„è´¡çŒ®è€…ï¼Œæƒ³è¦ä¿®å¤ä¸€ä¸ªæ¶ˆæ¯è·¯ç”±çš„bugã€‚åœ¨ä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œä½ éœ€è¦ç†è§£ï¼š

1. **é€šç”¨è·¯ç”±å±‚**çš„æŠ½è±¡ï¼ˆ200è¡Œä»£ç ï¼‰
2. **WhatsAppé€‚é…å™¨**çš„å®ç°ç»†èŠ‚ï¼ˆ300è¡Œä»£ç ï¼‰
3. **Telegramé€‚é…å™¨**çš„å®ç°ç»†èŠ‚ï¼ˆ300è¡Œä»£ç ï¼Œå¯èƒ½è¿˜æœ‰ä¸åŒçš„é”™è¯¯å¤„ç†æ¨¡å¼ï¼‰
4. **é…ç½®ç³»ç»Ÿ**å¦‚ä½•å†³å®šä½¿ç”¨å“ªä¸ªé€‚é…å™¨ï¼ˆ150è¡Œä»£ç ï¼‰
5. **ä¾èµ–æ³¨å…¥æ¡†æ¶**å¦‚ä½•ç»„è£…è¿™äº›ç»„ä»¶ï¼ˆ100è¡Œä»£ç ï¼‰

**æ€»è®¡**ï¼š1050è¡Œä»£ç ï¼Œ5ä¸ªä¸åŒçš„æŠ½è±¡å±‚æ¬¡ï¼Œå¯èƒ½éœ€è¦1-2å‘¨æ‰èƒ½å®Œå…¨ç†è§£ã€‚

ä½†åœ¨NanoClawçš„æ¨¡å¼ä¸‹ï¼Œä½ åªéœ€è¦ç†è§£ï¼š

1. **å½“å‰ç”Ÿæˆçš„ä»£ç **ï¼ˆé’ˆå¯¹ä½ éœ€è¦çš„å¹³å°ï¼Œçº¦200è¡Œï¼‰
2. **å¦‚æœéœ€è¦æ·»åŠ å¹³å°ï¼Œæ‰§è¡Œ/add-telegram skill**

**æ€»è®¡**ï¼š200è¡Œä»£ç ï¼Œç«‹å³å¯ç†è§£ã€‚

è¿™å°±æ˜¯ä¼ ç»Ÿæ¨¡å¼çš„é—®é¢˜ï¼š**å®ƒè¿«ä½¿æ¯ä¸ªç”¨æˆ·ä¸ºæ‰€æœ‰ç”¨æˆ·çš„åŠŸèƒ½ä¹°å•**â€”â€”è®¤çŸ¥è´Ÿè·ã€ä»£ç ä½“ç§¯ã€é…ç½®å¤æ‚åº¦ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚

#### 3.1.2 NanoClawçš„æ¿€è¿›é€‰æ‹©

é¢å¯¹ä¸Šè¿°ç»“æ„æ€§å›°å¢ƒï¼ŒNanoClawåšå‡ºäº†ä¸€ä¸ªåœ¨å½“æ—¶çœ‹æ¥éå¸¸æ¿€è¿›çš„é€‰æ‹©ï¼š

> **"Don't add features. Add skills."**

è¿™å¥è¯ä¸æ˜¯è¥é”€è¯æœ¯ï¼Œè€Œæ˜¯ä¸€ä¸ªæ ¹æœ¬æ€§çš„æ¶æ„å®£è¨€ï¼š

**ä¸å†ç»´æŠ¤ä¸€ä¸ªè¯•å›¾æ»¡è¶³æ‰€æœ‰äººçš„é€šç”¨ä»£ç åº“ï¼Œè€Œæ˜¯è®©æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ä¸ºè‡ªå·±çš„éœ€æ±‚å®šåˆ¶çš„ä¸“ç”¨ä»£ç åº“ã€‚**

è¿™ä¸æ˜¯"å‡å°‘åŠŸèƒ½"ï¼Œè€Œæ˜¯"åŠŸèƒ½çš„ç”Ÿæˆæ–¹å¼å‘ç”Ÿäº†æ ¹æœ¬æ€§æ”¹å˜"ã€‚

### 3.2 Skillsåè®®ï¼šé‡æ–°å®šä¹‰ä»£ç å®šåˆ¶

#### 3.2.1 æ ¸å¿ƒæ¦‚å¿µï¼šSkillä¸æ˜¯ä»€ä¹ˆï¼Œæ˜¯ä»€ä¹ˆ

è¦ç†è§£Skillsåè®®ï¼Œé¦–å…ˆéœ€è¦ç ´é™¤ä¸€äº›å¸¸è§çš„è¯¯è§£ï¼š

**Skillä¸æ˜¯**ï¼š
- âŒ **å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ’ä»¶**ï¼šSkillæ–‡ä»¶ä¸æ˜¯.so/.dllæ–‡ä»¶ï¼Œä¸æ˜¯è¿è¡Œæ—¶åŠ è½½çš„åŠ¨æ€é“¾æ¥åº“
- âŒ **ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„"æ’ä»¶"**ï¼šSkillä¸éœ€è¦å®šä¹‰æ ‡å‡†æ¥å£ã€å®ç°ç‰¹å®šAPIã€æ³¨å†Œåˆ°æ’ä»¶ç®¡ç†å™¨
- âŒ **ç®€å•çš„é…ç½®æ–‡ä»¶æˆ–è„šæœ¬**ï¼šSkillä¸æ˜¯JSON/YAMLé…ç½®ï¼Œä¹Ÿä¸æ˜¯Shell/Pythonè„šæœ¬

**Skillæ˜¯**ï¼š
- âœ… **ç”¨è‡ªç„¶è¯­è¨€ç¼–å†™çš„ä¸“å®¶æŒ‡ä»¤**ï¼šSkillçš„æ ¸å¿ƒæ˜¯Markdownæ ¼å¼çš„æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«çš„æ˜¯äººç±»å’ŒAIéƒ½èƒ½ç†è§£çš„æŒ‡ä»¤
- âœ… **æŒ‡å¯¼Claude Codeè¿›è¡Œæºä»£ç è½¬æ¢çš„"èœè°±"**ï¼šå°±åƒé£Ÿè°±æŒ‡å¯¼å¨å¸ˆåšèœï¼ŒSkillæŒ‡å¯¼Claudeå¦‚ä½•ä¿®æ”¹ä»£ç 
- âœ… **å£°æ˜å¼çš„ä»£ç ç”Ÿæˆè§„èŒƒ**ï¼šSkillå£°æ˜"æˆ‘æƒ³è¦ä»€ä¹ˆç»“æœ"ï¼Œè€Œä¸æ˜¯"å¦‚ä½•å®ç°è¿™ä¸ªç»“æœ"â€”â€”å®ç°ç»†èŠ‚ç”±Claudeæ ¹æ®å½“å‰ä»£ç ä¸Šä¸‹æ–‡å†³å®š

**ç±»æ¯”ç†è§£**ï¼š

```
ä¼ ç»Ÿæ’ä»¶æ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ ¸å¿ƒç³»ç»Ÿ      â”‚â—„â”€â”€â”€â”€â”‚   æ’ä»¶æ¥å£      â”‚â—„â”€â”€â”€â”€â”‚   æ’ä»¶å®ç°      â”‚
â”‚                 â”‚     â”‚   (å›ºå®š)        â”‚     â”‚   (é¢„ç¼–è¯‘)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ’ä»¶æ˜¯é¢„å…ˆç¼–è¯‘å¥½çš„é›¶ä»¶ï¼Œå®‰è£…æ—¶æ’å…¥åˆ°ç³»ç»Ÿé¢„ç•™çš„æ’æ§½ä¸­ã€‚
ç³»ç»Ÿæ˜¯å›ºå®šçš„ï¼Œæ’ä»¶ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œä¸¤è€…é€šè¿‡é¢„å®šä¹‰çš„æ¥å£äº¤äº’ã€‚


Skillsæ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å½“å‰ä»£ç       â”‚â”€â”€â”€â”€â–ºâ”‚   Claude Code   â”‚â”€â”€â”€â”€â–ºâ”‚   æ–°ç”Ÿæˆä»£ç     â”‚
â”‚   (ç‰¹å®šçŠ¶æ€)    â”‚     â”‚   + SkillæŒ‡ä»¤   â”‚     â”‚   (è½¬æ¢åçŠ¶æ€)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Skillæ˜¯é£Ÿè°±ï¼Œå‘Šè¯‰å¨å¸ˆï¼ˆClaudeï¼‰å¦‚ä½•ç”¨ç°æœ‰é£Ÿæï¼ˆå½“å‰ä»£ç ï¼‰
ä¸€æ­¥ä¸€æ­¥åšå‡ºæ–°èœï¼ˆæ–°åŠŸèƒ½ï¼‰ã€‚

æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯é’ˆå¯¹å½“å‰ä»£ç çŠ¶æ€çš„å®šåˆ¶è½¬æ¢ã€‚
```

#### 3.2.2 Skillæ–‡ä»¶ç»“æ„æ·±åº¦è§£æ

Skillæ–‡ä»¶çš„æ ‡å‡†ä½ç½®ï¼š`.claude/skills/{skill-name}/SKILL.md`

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„`add-telegram` Skillæ–‡ä»¶ï¼Œæ·±å…¥ç†è§£æ¯ä¸ªéƒ¨åˆ†çš„è®¾è®¡æ„å›¾ï¼š

```markdown
---
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                    å…ƒæ•°æ®å±‚ (Metadata Layer)                          â•‘
# â•‘         è¿™ä¸€å±‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åŠ è½½ï¼Œå ç”¨æå°‘Tokenï¼Œç”¨äºå¿«é€ŸåŒ¹é…          â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºç³»ç»Ÿå†…éƒ¨è¯†åˆ«å’Œç´¢å¼•
skill_id: add-telegram

# æ˜¾ç¤ºåç§°ï¼Œç”¨äºUIå±•ç¤ºå’Œç”¨æˆ·è¯†åˆ«
name: Add Telegram Support

# è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼Œéµå¾ªSemVerè§„èŒƒ
# major: ä¸å…¼å®¹çš„å˜æ›´
# minor: å‘åå…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
# patch: å‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤
version: 1.0.0

# ä½œè€…ä¿¡æ¯ï¼Œç”¨äºå½’å±å’Œè”ç³»
author: "@qwibitai <nanoclaw@example.com>"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æè¿°å­—æ®µæ˜¯å…ƒæ•°æ®å±‚ä¸­æœ€é‡è¦çš„éƒ¨åˆ†
# å®ƒéœ€è¦åœ¨æçŸ­çš„Tokenå†…ï¼Œè®©ç³»ç»Ÿå‡†ç¡®ç†è§£ï¼š
# 1. è¿™ä¸ªSkillæ˜¯åšä»€ä¹ˆçš„
# 2. åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨å®ƒ
# 3. éœ€è¦ä»€ä¹ˆå…ˆå†³æ¡ä»¶
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
description: |
  Adds Telegram Bot API integration as an alternative or complementary
  channel to WhatsApp.

  ## Use When
  - User wants to interact with the agent via Telegram instead of WhatsApp
  - User wants to add Telegram as an additional channel alongside WhatsApp
  - User mentions "Telegram bot", "TG integration", or "migrate to Telegram"

  ## Prerequisites
  - User must have a Telegram Bot Token (obtainable from @BotFather)
  - User should understand that this adds a channel, not replaces existing ones
  - Current code must be in a working state (can run `npm run dev` without errors)

  ## Outcome
  After successful execution:
  - Telegram messages will be routed to the agent
  - Agent responses will be sent back to Telegram
  - Existing channels (if any) continue to work
  - User can interact with the agent via Telegram Bot

# æ ‡ç­¾ç”¨äºåˆ†ç±»å’Œæœç´¢
tags:
  - channel
  - telegram
  - messaging
  - integration
  - bot

# æ—¶é—´æˆ³ç”¨äºè¿½è¸ªå’Œç¼“å­˜å¤±æ•ˆ
created_at: "2025-01-15T10:00:00Z"
updated_at: "2025-02-20T14:30:00Z"

# å…¼å®¹æ€§å£°æ˜ï¼Œç”¨äºç³»ç»ŸåŒ¹é…åˆé€‚çš„Skillç‰ˆæœ¬
compatibility:
  nanoclaw: ">=1.0.0"
  node: ">=20.0.0"

# ä¾èµ–çš„å…¶ä»–Skillsï¼Œç”¨äºè‡ªåŠ¨å®‰è£…ä¾èµ–æ ‘
dependencies: []

# å¯é€‰çš„å›¾æ ‡ï¼Œç”¨äºUIå±•ç¤º
icon: "ğŸ“±"
---

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                 å®Œæ•´æŒ‡ä»¤å±‚ (Full Instructions)                        â•‘
# â•‘    è¿™ä¸€å±‚ä»…åœ¨Skillè¢«è§¦å‘æ—¶åŠ è½½ï¼ŒåŒ…å«è¯¦ç»†çš„æ“ä½œæ­¥éª¤å’Œä»£ç           â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## Overview

æœ¬Skillå°†æŒ‡å¯¼ä½ ä¸ºNanoClawæ·»åŠ å®Œæ•´çš„Telegram Botæ”¯æŒã€‚ä½ å°†é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®Œæˆé›†æˆï¼š

1. **æ·»åŠ Telegrafä¾èµ–** - Telegram Bot SDK
2. **å®ç°TelegramChannel** - éµå¾ªNanoClawçš„Channelæ¥å£
3. **é›†æˆåˆ°ä¸»æµç¨‹** - åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–Telegram
4. **æµ‹è¯•éªŒè¯** - ç¡®ä¿æ¶ˆæ¯æ”¶å‘æ­£å¸¸å·¥ä½œ

æ¯ä¸ªæ­¥éª¤éƒ½åŒ…å«ï¼š
- âœ… å…·ä½“çš„æ“ä½œæŒ‡ä»¤
- âœ… å®Œæ•´çš„ä»£ç ç¤ºä¾‹
- âœ… éªŒè¯æ–¹æ³•
- âœ… å›æ»šæ–¹æ¡ˆï¼ˆå¦‚æœå‡ºç°é—®é¢˜ï¼‰

## Prerequisites Check

åœ¨å¼€å§‹å‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ¡ä»¶å·²æ»¡è¶³ï¼š

### 1. è·å–Telegram Bot Token

- åœ¨Telegramä¸­æœç´¢ @BotFather
- å‘é€ `/newbot` å‘½ä»¤
- æŒ‰æç¤ºè®¾ç½®Botåç§°å’Œç”¨æˆ·å
- ä¿å­˜æä¾›çš„Tokenï¼ˆæ ¼å¼å¦‚ï¼š`123456789:ABCdefGHIjklMNOpqrsTUVwxyz`ï¼‰

### 2. éªŒè¯å½“å‰ä»£ç çŠ¶æ€

```bash
# ç¡®ä¿ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œ
npm install
npm run build
npm run dev

# åº”è¯¥èƒ½æ­£å¸¸å¯åŠ¨ï¼Œæ²¡æœ‰ç¼–è¯‘é”™è¯¯
```

### 3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä¸´æ—¶ï¼‰

```bash
export TELEGRAM_BOT_TOKEN="your-token-here"
```

âœ… **å¦‚æœä»¥ä¸Šéƒ½å®Œæˆï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚**
âŒ **å¦‚æœæœ‰ä»»ä½•å¤±è´¥ï¼Œå…ˆè§£å†³åå†ç»§ç»­ã€‚**

## Step 1: æ·»åŠ Telegrafä¾èµ–

### Action

ç¼–è¾‘`package.json`ï¼Œåœ¨`dependencies`éƒ¨åˆ†æ·»åŠ `telegraf`ï¼š

```json
{
  "name": "nanoclaw",
  "version": "1.0.0",
  "type": "module",
  "dependencies": {
    "@anthropic-ai/claude-agent-sdk": "^1.0.0",
    "baileys": "^6.7.0",
    "telegraf": "^4.16.0"
  }
}
```

### Verification

```bash
# å®‰è£…æ–°ä¾èµ–
npm install

# éªŒè¯å®‰è£…æˆåŠŸ
npm list telegraf

# é¢„æœŸè¾“å‡ºï¼š
# nanoclaw@1.0.0 /path/to/nanoclaw
# â””â”€â”€ telegraf@4.16.0
```

âœ… **å¦‚æœ`npm install`æˆåŠŸä¸”æ²¡æœ‰é”™è¯¯ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚**
âŒ **å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥Node.jsç‰ˆæœ¬(>=20)å’Œç½‘ç»œè¿æ¥ã€‚**

### Rollback (if needed)

```bash
# å¦‚æœå‡ºç°é—®é¢˜ï¼Œæ¢å¤package.json
# ç„¶åè¿è¡Œï¼š
npm install
```

## Step 2: å®ç°TelegramChannel

### Action

åˆ›å»ºæ–°æ–‡ä»¶`src/channels/telegram.ts`ï¼š

```typescript
/**
 * Telegram Channel Implementation for NanoClaw
 *
 * Provides Telegram Bot API integration using the Telegraf library.
 * Implements the Channel interface for seamless integration with NanoClaw's
 * message routing system.
 */
import { Telegraf, Context } from 'telegraf';
import { Channel, NewMessage } from '../types.js';
import { logger } from '../logger.js';

export interface TelegramChannelOptions {
  /** Telegram Bot Token from @BotFather */
  token: string;
  /** Called when a new message is received */
  onMessage?: (chatJid: string, msg: NewMessage) => void;
  /** Called when chat metadata is updated */
  onChatMetadata?: (
    chatJid: string,
    timestamp: string,
    name?: string,
    channel?: string,
    isGroup?: boolean,
  ) => void;
}

/**
 * Telegram Channel implementation
 *
 * Maps Telegram's chat model to NanoClaw's JID-based routing:
 * - JID format: tg:${chatId}
 * - Private chats: tg:${userId}
 * - Groups: tg:${groupId}
 */
export class TelegramChannel implements Channel {
  private bot: Telegraf;
  private connected = false;
  private opts: TelegramChannelOptions;

  constructor(opts: TelegramChannelOptions) {
    this.opts = opts;
    this.bot = new Telegraf(opts.token);
    this.setupHandlers();
  }

  /**
   * Get the channel name
   */
  getName(): string {
    return 'telegram';
  }

  /**
   * Check if the channel is currently connected
   */
  isConnected(): boolean {
    return this.connected;
  }

  /**
   * Set up message handlers
   */
  private setupHandlers(): void {
    // Handle text messages
    this.bot.on('text', async (ctx) => {
      await this.handleTextMessage(ctx);
    });

    // Handle other message types if needed
    // this.bot.on('photo', async (ctx) => { ... });
  }

  /**
   * Handle a text message from Telegram
   */
  private async handleTextMessage(ctx: Context): Promise<void> {
    const chatId = ctx.chat?.id;
    const messageId = ctx.message?.message_id;
    const from = ctx.from;
    const text = ctx.message?.text;

    if (!chatId || !messageId || !text) {
      logger.warn('Received incomplete message from Telegram');
      return;
    }

    const chatJid = `tg:${chatId}`;
    const timestamp = new Date(ctx.message.date * 1000).toISOString();

    // Create NewMessage in NanoClaw format
    const message: NewMessage = {
      id: String(messageId),
      chat_jid: chatJid,
      sender: String(from?.id || 'unknown'),
      sender_name: from?.first_name || 'Unknown',
      content: text,
      timestamp: timestamp,
      is_from_me: false,
      is_bot_message: false,
    };

    // Extract and store chat metadata
    const chatName = ctx.chat?.type === 'private'
      ? from?.first_name
      : (ctx.chat as { title?: string })?.title;

    this.opts.onChatMetadata?.(
      chatJid,
      timestamp,
      chatName,
      'telegram',
      ctx.chat?.type !== 'private',
    );

    // Notify message handler
    this.opts.onMessage?.(chatJid, message);
  }

  /**
   * Connect to Telegram and start receiving messages
   */
  async connect(): Promise<void> {
    try {
      await this.bot.launch();
      this.connected = true;
      logger.info('Telegram bot connected and listening for messages');
    } catch (error) {
      logger.error({ error }, 'Failed to connect to Telegram');
      throw error;
    }
  }

  /**
   * Disconnect from Telegram
   */
  async disconnect(): Promise<void> {
    try {
      await this.bot.stop();
      this.connected = false;
      logger.info('Telegram bot disconnected');
    } catch (error) {
      logger.error({ error }, 'Error disconnecting from Telegram');
      throw error;
    }
  }

  /**
   * Send a message to a Telegram chat
   */
  async sendMessage(jid: string, text: string): Promise<void> {
    const chatId = jid.replace('tg:', '');

    try {
      await this.bot.telegram.sendMessage(chatId, text);
      logger.debug({ chatId }, 'Message sent to Telegram');
    } catch (error) {
      logger.error({ error, chatId }, 'Failed to send message to Telegram');
      throw error;
    }
  }

  /**
   * Check if this channel owns a given JID
   */
  ownsJid(jid: string): boolean {
    return jid.startsWith('tg:');
  }

  /**
   * Set typing indicator (not implemented for Telegram)
   */
  async setTyping(jid: string, typing: boolean): Promise<void> {
    // Telegram doesn't have a persistent typing indicator
    // We could implement a temporary one if needed
    logger.debug({ jid, typing }, 'Typing indicator not supported for Telegram');
  }
}
```

### å…³é”®è®¾è®¡è¯´æ˜

1. **JIDæ ¼å¼**: Telegramä½¿ç”¨`tg:${chatId}`æ ¼å¼ï¼Œä¸WhatsAppçš„`@g.us`æ ¼å¼åŒºåˆ†
2. **æ¶ˆæ¯å¤„ç†**: å°†Telegrafçš„Contextè½¬æ¢ä¸ºNanoClawçš„NewMessageæ ¼å¼
3. **å…ƒæ•°æ®æå–**: ä»Contextä¸­æå–chatåç§°å’Œç±»å‹ï¼ˆprivate/groupï¼‰
4. **é”™è¯¯å¤„ç†**: æ¯ä¸ªæ–¹æ³•éƒ½æœ‰try-catchï¼Œç¡®ä¿é”™è¯¯è¢«è®°å½•å’Œä¼ æ’­

### éªŒè¯æ­¥éª¤

1. **ç¼–è¯‘æ£€æŸ¥**ï¼š`npm run build`åº”è¯¥æ— é”™è¯¯
2. **ç±»å‹æ£€æŸ¥**ï¼š`npx tsc --noEmit`åº”è¯¥é€šè¿‡
3. **ä»£ç é£æ ¼**ï¼š`npm run lint`åº”è¯¥é€šè¿‡

### æµ‹è¯•æ–¹æ³•

1. **å•å…ƒæµ‹è¯•**ï¼š
```typescript
// src/channels/telegram.test.ts
describe('TelegramChannel', () => {
  it('should format JID correctly', () => {
    const channel = new TelegramChannel({ token: 'test' });
    expect(channel.ownsJid('tg:123456')).toBe(true);
    expect(channel.ownsJid('whatsapp:123')).toBe(false);
  });

  it('should extract chat ID from JID', async () => {
    const channel = new TelegramChannel({ token: 'test' });
    // æµ‹è¯•sendMessageæ—¶ä¼šæå–chatId
  });
});
```

2. **é›†æˆæµ‹è¯•**ï¼š
```bash
# 1. è®¾ç½®æµ‹è¯•ç¯å¢ƒ
export TELEGRAM_BOT_TOKEN="your-test-bot-token"

# 2. å¯åŠ¨åº”ç”¨
npm run dev

# 3. å‘æµ‹è¯•Botå‘é€æ¶ˆæ¯
# åœ¨Telegramä¸­æ‰¾åˆ°ä½ çš„Botï¼Œå‘é€ /start å’Œæµ‹è¯•æ¶ˆæ¯

# 4. æ£€æŸ¥æ—¥å¿—
# åº”è¯¥èƒ½çœ‹åˆ°æ¶ˆæ¯æ¥æ”¶æ—¥å¿—å’ŒAgentå“åº”
```

### å›æ»šæ–¹æ¡ˆ

å¦‚æœå‘ç°é—®é¢˜ï¼š

1. **ç«‹å³å›æ»š**ï¼š
```bash
# 1. æ³¨é‡Šæ‰æˆ–åˆ é™¤ src/channels/telegram.ts
# 2. æ¢å¤ src/index.ts åˆ°ä¹‹å‰çš„çŠ¶æ€
# 3. åˆ é™¤ package.json ä¸­çš„ telegraf ä¾èµ–
# 4. è¿è¡Œ npm install
# 5. æµ‹è¯•ç¡®è®¤ç³»ç»Ÿæ¢å¤æ­£å¸¸
```

2. **æ•°æ®æ¸…ç†**ï¼š
```sql
-- å¦‚æœéœ€è¦æ¸…ç†æ•°æ®åº“ä¸­çš„Telegramç›¸å…³æ•°æ®
DELETE FROM messages WHERE chat_jid LIKE 'tg:%';
DELETE FROM chats WHERE jid LIKE 'tg:%';
```

### è¿›é˜¶åŠŸèƒ½

1. **Webhookæ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰**ï¼š

```typescript
// åœ¨TelegramChannelä¸­æ·»åŠ 
async setupWebhook(url: string): Promise<void> {
  await this.bot.telegram.setWebhook(url);
  logger.info({ url }, 'Telegram webhook set');
}

// åœ¨ä¸»åº”ç”¨ä¸­æ·»åŠ webhookè·¯ç”±
app.post('/webhook/telegram', async (req, res) => {
  await telegramChannel.handleUpdate(req.body);
  res.sendStatus(200);
});
```

2. **åª’ä½“æ¶ˆæ¯æ”¯æŒ**ï¼š

```typescript
// å¤„ç†å›¾ç‰‡
this.bot.on('photo', async (ctx) => {
  const photo = ctx.message.photo?.pop(); // è·å–æœ€é«˜åˆ†è¾¨ç‡
  if (!photo) return;

  // ä¸‹è½½å›¾ç‰‡
  const fileLink = await ctx.telegram.getFileLink(photo.file_id);

  // è½¬æ¢ä¸ºbase64æˆ–ä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶
  // ç„¶åä½œä¸ºæ¶ˆæ¯å†…å®¹çš„ä¸€éƒ¨åˆ†å‘é€ç»™Agent

  const message: NewMessage = {
    // ...åŸºç¡€å­—æ®µ
    content: `[Image: ${fileLink}]`, // æˆ–è€…å®é™…çš„å›¾ç‰‡æ•°æ®
    // ...
  };

  this.opts.onMessage?.(chatJid, message);
});
```

3. **ç¾¤ç»„ç®¡ç†**ï¼š

```typescript
// å¤„ç†ç¾¤ç»„åŠ å…¥/ç¦»å¼€
this.bot.on('new_chat_members', async (ctx) => {
  const botInfo = await ctx.telegram.getMe();
  const wasAdded = ctx.message.new_chat_members?.some(
    member => member.id === botInfo.id
  );

  if (wasAdded) {
    // Botè¢«æ·»åŠ åˆ°ç¾¤ç»„
    logger.info({ chatId: ctx.chat.id }, 'Bot added to group');
    // å¯ä»¥å‘é€æ¬¢è¿æ¶ˆæ¯
    await ctx.reply('Hello! I\'m NanoClaw. Mention me or DM me to chat.');
  }
});
```

## æ€»ç»“

é€šè¿‡æœ¬Skillï¼Œä½ å·²ç»ä¸ºNanoClawæ·»åŠ äº†å®Œæ•´çš„Telegramæ”¯æŒã€‚ç°åœ¨ç”¨æˆ·å¯ä»¥é€šè¿‡Telegram Botä¸ä½ çš„Agentäº¤äº’äº†ã€‚

### æ£€æŸ¥æ¸…å•

- [ ] `package.json` å·²æ·»åŠ  `telegraf` ä¾èµ–
- [ ] `src/channels/telegram.ts` å·²åˆ›å»ºï¼Œä»£ç æ— è¯¯
- [ ] `src/index.ts` å·²æ·»åŠ Telegramåˆå§‹åŒ–ä»£ç 
- [ ] ç¯å¢ƒå˜é‡ `TELEGRAM_BOT_TOKEN` å·²è®¾ç½®
- [ ] è¿è¡Œ `npm run build` æ— é”™è¯¯
- [ ] å¯åŠ¨åº”ç”¨ï¼Œæµ‹è¯•æ¶ˆæ¯æ”¶å‘æ­£å¸¸

### ä¸‹ä¸€æ­¥

1. **é‚€è¯·Botåˆ°ç¾¤ç»„**ï¼šæµ‹è¯•ç¾¤ç»„æ¶ˆæ¯åŠŸèƒ½
2. **é…ç½®Webhook**ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼šæé«˜æ€§èƒ½å’Œå“åº”é€Ÿåº¦
3. **æ·»åŠ æ›´å¤šåŠŸèƒ½**ï¼šæ”¯æŒå›¾ç‰‡ã€æ–‡ä»¶ã€å‘½ä»¤ç­‰
4. **åˆ†äº«ç»™ç¤¾åŒº**ï¼šå¦‚æœä½ æ”¹è¿›äº†è¿™ä¸ªSkillï¼Œè€ƒè™‘åˆ†äº«ç»™å…¶ä»–NanoClawç”¨æˆ·

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æœ¬Skillçš„"Troubleshooting"éƒ¨åˆ†
2. æŸ¥çœ‹Telegrafæ–‡æ¡£ï¼šhttps://telegraf.js.org/
3. åœ¨NanoClaw Discordç¤¾åŒºå¯»æ±‚å¸®åŠ©

---

*æœ¬Skillç”± NanoClaw Team ç»´æŠ¤*
*æœ€åæ›´æ–°ï¼š2025-02-20*
*ç‰ˆæœ¬ï¼š1.0.0*
```

### 3.3 Skillsåè®®çš„å·¥ä½œåŸç†

#### 3.3.1 æ‰§è¡Œæµç¨‹è¯¦è§£

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„æ‰§è¡Œæµç¨‹ï¼Œç†è§£Skillsåè®®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

```
ç”¨æˆ·è¾“å…¥: /add-telegram

ç³»ç»Ÿå¤„ç†:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æŠ€èƒ½å‘ç°ä¸åŒ¹é…é˜¶æ®µ                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ æ‰«æ .claude/skills/ ç›®å½•ä¸‹çš„æ‰€æœ‰ SKILL.md æ–‡ä»¶               â”‚
â”‚ â€¢ è§£ææ¯ä¸ªæ–‡ä»¶çš„ YAML Frontmatterï¼ˆå…ƒæ•°æ®å±‚ï¼‰                    â”‚
â”‚ â€¢ æ„å»ºæŠ€èƒ½ç´¢å¼•ï¼š{skill_id â†’ metadata}                           â”‚
â”‚ â€¢ æœ¬æ¬¡åŠ è½½çš„ Token å¼€é”€ï¼šæ¯ä¸ªæŠ€èƒ½çº¦ 50-100 tokens               â”‚
â”‚   ï¼ˆ1000 ä¸ªæŠ€èƒ½ = çº¦ 75K tokensï¼Œå¯å¿½ç•¥ï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ„å›¾åŒ¹é…é˜¶æ®µ                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ç”¨æˆ·è¾“å…¥ï¼š"/add-telegram"                                      â”‚
â”‚ â€¢ ç³»ç»ŸæŸ¥æ‰¾ï¼šskill_id åŒ¹é… "add-telegram"                         â”‚
â”‚ â€¢ æ‰¾åˆ°åŒ¹é…ï¼ŒåŠ è½½å®Œæ•´æŠ€èƒ½å†…å®¹                                      â”‚
â”‚ â€¢ æœ¬æ¬¡åŠ è½½çš„ Token å¼€é”€ï¼šçº¦ 2000-5000 tokensï¼ˆå®Œæ•´æŒ‡ä»¤å±‚ï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æŠ€èƒ½æ‰§è¡Œé˜¶æ®µï¼ˆClaude Code æ‰§è¡Œï¼‰                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å°† SKILL.md ä½œä¸ºç³»ç»Ÿæç¤ºè¯çš„ä¸€éƒ¨åˆ†                             â”‚
â”‚ â€¢ Claude è§£æï¼šOverview â†’ Prerequisites â†’ Step-by-Step           â”‚
â”‚ â€¢ æ¯ä¸ª Step åŒ…å«ï¼šAction + Code + Verification + Rollback        â”‚
â”‚ â€¢ Claude æ‰§è¡Œï¼š                                                   â”‚
â”‚   1. è¯»å–å½“å‰ä»£ç çŠ¶æ€                                             â”‚
â”‚   2. ç”Ÿæˆè½¬æ¢åçš„ä»£ç                                              â”‚
â”‚   3. åº”ç”¨ä¿®æ”¹ï¼ˆEdit/Writeï¼‰                                       â”‚
â”‚   4. è¿è¡Œ Verification éªŒè¯                                       â”‚
â”‚   5. å¦‚æœå¤±è´¥ï¼Œæ‰§è¡Œ Rollback                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ‰§è¡Œç»“æœ                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ä»£ç åº“å·²è½¬æ¢ï¼š                                                  â”‚
â”‚   - package.json æ·»åŠ äº† telegraf ä¾èµ–                           â”‚
â”‚   - src/channels/telegram.ts å·²åˆ›å»º                             â”‚
â”‚   - src/index.ts å·²æ›´æ–°ä»¥åˆå§‹åŒ– Telegram                         â”‚
â”‚ â€¢ éªŒè¯é€šè¿‡ï¼š                                                      â”‚
â”‚   - npm run build æˆåŠŸ                                           â”‚
â”‚   - ç±»å‹æ£€æŸ¥é€šè¿‡                                                  â”‚
â”‚ â€¢ ç³»ç»ŸçŠ¶æ€ï¼š                                                      â”‚
â”‚   - ç”¨æˆ·ç°åœ¨å¯ä»¥è®¾ç½® TELEGRAM_BOT_TOKEN å¹¶å¯åŠ¨åº”ç”¨              â”‚
â”‚   - åº”ç”¨å°†åŒæ—¶ç›‘å¬ WhatsApp å’Œ Telegramï¼ˆå¦‚æœé…ç½®äº†ï¼‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.2 Progressive Disclosure æŠ€æœ¯è¯¦è§£

Skillsåè®®çš„ç²¾é«“åœ¨äº**Progressive Disclosureï¼ˆæ¸è¿›å¼æš´éœ²ï¼‰**æœºåˆ¶ã€‚è¿™æ˜¯ä¸€ç§ç²¾å¿ƒè®¾è®¡çš„åˆ†å±‚åŠ è½½ç­–ç•¥ï¼Œç›®çš„æ˜¯åœ¨**æœ€å¤§åŒ–åŠŸèƒ½å¯ç”¨æ€§**å’Œ**æœ€å°åŒ–ä¸Šä¸‹æ–‡å¼€é”€**ä¹‹é—´å–å¾—å®Œç¾å¹³è¡¡ã€‚

è®©æˆ‘ä»¬æ·±å…¥ç†è§£è¿™ä¸ªæœºåˆ¶çš„æŠ€æœ¯ç»†èŠ‚ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Progressive Disclosure ä¸‰å±‚æ¨¡å‹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘ ç¬¬ä¸€å±‚ï¼šå…ƒæ•°æ®å±‚ (Metadata Layer)                                  â•‘  â”‚
â”‚  â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘  â”‚
â”‚  â•‘ ä½ç½®ï¼šYAML Frontmatter                                            â•‘  â”‚
â”‚  â•‘ å†…å®¹ï¼šskill_id, name, version, description, tags                 â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘ Token å ç”¨ï¼š~50-100 tokens per skill                            â•‘  â”‚
â”‚  â•‘ åŠ è½½æ—¶æœºï¼šç³»ç»Ÿå¯åŠ¨æ—¶                                              â•‘  â”‚
â”‚  â•‘ æ•°é‡ä¸Šé™ï¼šå¯åŒæ—¶æŒ‚è½½æ•°åƒä¸ª skills                               â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘ ç¤ºä¾‹ï¼š                                                            â•‘  â”‚
â”‚  â•‘   skill_id: add-telegram                                         â•‘  â”‚
â”‚  â•‘   name: Add Telegram Support                                     â•‘  â”‚
â”‚  â•‘   description: Add Telegram as a channel...                      â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                              â†“ ç”¨æˆ·è§¦å‘ /add-telegram                   â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘ ç¬¬äºŒå±‚ï¼šå®Œæ•´æŒ‡ä»¤å±‚ (Full Instructions)                           â•‘  â”‚
â”‚  â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘  â”‚
â”‚  â•‘ ä½ç½®ï¼šMarkdown ä¸»ä½“                                               â•‘  â”‚
â”‚  â•‘ å†…å®¹ï¼šOverview, Prerequisites, Step-by-Step Guide               â•‘  â”‚
â”‚  â•‘         - Action (what to do)                                     â•‘  â”‚
â”‚  â•‘         - Code (how to do it)                                   â•‘  â”‚
â”‚  â•‘         - Verification (how to check)                           â•‘  â”‚
â”‚  â•‘         - Rollback (how to undo)                                â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘ Token å ç”¨ï¼š~2,000-5,000 tokens per skill                        â•‘  â”‚
â”‚  â•‘ åŠ è½½æ—¶æœºï¼šSkill è¢«è§¦å‘æ—¶                                          â•‘  â”‚
â”‚  â•‘ æ•°é‡ä¸Šé™ï¼šåŒæ—¶åªèƒ½åŠ è½½æœ‰é™æ•°é‡çš„ skillsï¼ˆå—ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼‰    â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘ ç¤ºä¾‹ï¼š                                                            â•‘  â”‚
â”‚  â•‘   ## Step 1: Add Dependency                                      â•‘  â”‚
â”‚  â•‘   Edit `package.json`:                                           â•‘  â”‚
â”‚  â•‘   ```json                                                         â•‘  â”‚
â•‘  â•‘   { "dependencies": { "telegraf": "^4.16.0" } }                â•‘  â”‚
â•‘  â•‘   ```                                                            â•‘  â”‚
â•‘  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                              â†“ æ‰§è¡Œå®Œæˆ                                 â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘ ç¬¬ä¸‰å±‚ï¼šå…³è”èµ„æºå±‚ (Linked Resources)                              â•‘  â”‚
â”‚  â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘  â”‚
â”‚  â•‘ ä½ç½®ï¼šä¸ SKILL.md åŒç›®å½•çš„è¾…åŠ©æ–‡ä»¶                                 â•‘  â”‚
â”‚  â•‘ å†…å®¹ï¼š                                                          â•‘  â”‚
â”‚  â•‘   - é¢„è®¾è„šæœ¬ (setup.sh, test.js)                                 â•‘  â”‚
â”‚  â•‘   - æ¨¡æ¿æ–‡ä»¶ (template.ts, config.yaml)                          â•‘  â”‚
â”‚  â•‘   - æµ‹è¯•ç”¨ä¾‹ (test-cases.json)                                   â•‘  â”‚
â”‚  â•‘   - æ–‡æ¡£é™„ä»¶ (architecture.png, flowchart.svg)                   â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘ Token å ç”¨ï¼šå–å†³äºæ–‡ä»¶å¤§å°ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰                            â•‘  â”‚
â”‚  â•‘ åŠ è½½æ—¶æœºï¼šæŒ‡ä»¤ä¸­æ˜¾å¼å¼•ç”¨æ—¶ï¼ˆå¦‚"å‚è€ƒ templates/basic.ts"ï¼‰         â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘ ç¤ºä¾‹ï¼š                                                            â•‘  â”‚
â”‚  â•‘   SKILL.md ä¸­å†™ï¼š                                                  â•‘  â”‚
â”‚  â•‘   "å‚è€ƒ templates/channel-implementation.ts åˆ›å»ºæ–‡ä»¶"            â•‘  â”‚
â”‚  â•‘                                                                  â•‘  â”‚
â”‚  â•‘   ç³»ç»Ÿè¡Œä¸ºï¼š                                                       â•‘  â”‚
â”‚  â•‘   1. è§£æåˆ°å¼•ç”¨ templates/channel-implementation.ts              â•‘  â”‚
â”‚  â•‘   2. è¯»å– .claude/skills/add-telegram/templates/                  â•‘  â”‚
â”‚  â•‘      channel-implementation.ts                                     â•‘  â”‚
â”‚  â•‘   3. åŠ è½½å†…å®¹åˆ°ä¸Šä¸‹æ–‡ï¼ˆå¢åŠ  Token å ç”¨ï¼‰                            â•‘  â”‚
â”‚  â•‘   4. ç»§ç»­æ‰§è¡Œåç»­æŒ‡ä»¤                                              â•‘  â”‚
â•‘  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.3 Token æ•ˆç‡çš„é‡åŒ–åˆ†æ

è®©æˆ‘ä»¬ç”¨å…·ä½“æ•°å­—æ¥è¯´æ˜ Progressive Disclosure çš„ Token æ•ˆç‡ä¼˜åŠ¿ï¼š

```
å‡è®¾æ¡ä»¶ï¼š
- ä¸Šä¸‹æ–‡çª—å£ï¼š100K tokensï¼ˆClaude 3.5 Sonnetï¼‰
- å¹³å‡æ¯ä¸ª Skill å…ƒæ•°æ®ï¼š75 tokens
- å¹³å‡æ¯ä¸ª Skill å®Œæ•´æŒ‡ä»¤ï¼š3,500 tokens
- å¹³å‡æ¯ä¸ª Skill å…³è”èµ„æºï¼š1,000 tokensï¼ˆæŒ‰éœ€ï¼‰

åœºæ™¯ Aï¼šä¼ ç»Ÿæ¨¡å¼ï¼ˆå…¨é‡åŠ è½½ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç”¨æˆ·å®‰è£…äº† 10 ä¸ª Skills
ç³»ç»Ÿéœ€è¦åŒæ—¶åŠ è½½æ‰€æœ‰ Skills çš„å®Œæ•´æŒ‡ä»¤ï¼ˆå‡†å¤‡éšæ—¶ä½¿ç”¨ï¼‰

Token å ç”¨ = 10 Ã— 3,500 = 35,000 tokens (35%)

é—®é¢˜ï¼š
- 35% çš„ä¸Šä¸‹æ–‡è¢«å›ºå®šå ç”¨ï¼Œæ— æ³•ç”¨äºå¯¹è¯
- å³ä½¿å½“å‰åªä½¿ç”¨ 1 ä¸ª Skillï¼Œå…¶ä»– 9 ä¸ªä¹Ÿå ç”¨ç©ºé—´
- éšç€ Skills å¢åŠ ï¼Œå¯ç”¨ä¸Šä¸‹æ–‡çº¿æ€§å‡å°‘


åœºæ™¯ Bï¼šProgressive Disclosure æ¨¡å¼ï¼ˆNanoClaw å®é™…ä½¿ç”¨ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç”¨æˆ·å®‰è£…äº† 10 ä¸ª Skills
ç³»ç»ŸåªåŠ è½½å…ƒæ•°æ®å±‚ï¼Œå®Œæ•´æŒ‡ä»¤å±‚æŒ‰éœ€åŠ è½½

é˜¶æ®µ 1ï¼šç©ºé—²çŠ¶æ€ï¼ˆç”¨æˆ·æœªè§¦å‘ä»»ä½• Skillï¼‰
Token å ç”¨ = 10 Ã— 75 = 750 tokens (0.75%)
èŠ‚çœ = 35,000 - 750 = 34,250 tokens (98% èŠ‚çœï¼)

é˜¶æ®µ 2ï¼šæ‰§è¡Œå•ä¸ª Skillï¼ˆå¦‚ /add-telegramï¼‰
Token å ç”¨ = (10 Ã— 75) + 3,500 = 4,250 tokens (4.25%)
èŠ‚çœ = 35,000 - 4,250 = 30,750 tokens (88% èŠ‚çœï¼)

é˜¶æ®µ 3ï¼šæ‰§è¡Œå¤æ‚ Skillï¼ˆéœ€è¦å…³è”èµ„æºï¼‰
Token å ç”¨ = (10 Ã— 75) + 3,500 + 1,000 = 5,250 tokens (5.25%)
ä»ç„¶æ¯”ä¼ ç»Ÿæ¨¡å¼èŠ‚çœ 85%ï¼


åœºæ™¯ Cï¼šå¤§è§„æ¨¡éƒ¨ç½²ï¼ˆ100 ä¸ª Skillsï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¼ ç»Ÿæ¨¡å¼ï¼š100 Ã— 3,500 = 350,000 tokens (350% > ä¸Šä¸‹æ–‡çª—å£ï¼)
â†’ æ— æ³•åŒæ—¶åŠ è½½æ‰€æœ‰ Skills

Progressive Disclosureï¼š
- ç©ºé—²ï¼š100 Ã— 75 = 7,500 tokens (7.5%)
- æ‰§è¡Œå•ä¸ªï¼š7,500 + 3,500 = 11,000 tokens (11%)
- æ‰§è¡Œå¤šä¸ªï¼ˆå¹¶å‘ï¼‰ï¼šæ ¹æ®å®é™…å¹¶å‘æ•°çº¿æ€§å¢é•¿
â†’ å³ä½¿ 1000 ä¸ª Skills ä¹Ÿèƒ½é«˜æ•ˆç®¡ç†ï¼


é‡åŒ–ç»“è®ºï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Progressive Disclosure ç›¸æ¯”ä¼ ç»Ÿå…¨é‡åŠ è½½æ¨¡å¼ï¼š

1. ç©ºé—²çŠ¶æ€ Token æ•ˆç‡æå‡ï¼š46x (98% èŠ‚çœ)
2. å• Skill æ‰§è¡Œ Token æ•ˆç‡æå‡ï¼š8x (88% èŠ‚çœ)
3. æ”¯æŒçš„æœ€å¤§ Skill æ•°é‡ï¼šä» ~28 æå‡åˆ° ~1000+ (35x)
4. ä¸Šä¸‹æ–‡ç•™ç»™å®é™…å¯¹è¯çš„æ¯”ä¾‹ï¼šä» 65% æå‡åˆ° 95%+

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ NanoClaw å¯ä»¥æŒ‚è½½æˆç™¾ä¸Šåƒä¸ª Skills è€Œä¸ä¼šæ‹–å®ç³»ç»Ÿâ€”â€”
å› ä¸º Progressive Disclosure ç¡®ä¿åªæœ‰çœŸæ­£éœ€è¦çš„ä»£ç æ‰ä¼šè¢«åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚
```

#### 3.3.4 æ¸è¿›å¼æš´éœ²çš„å·¥ç¨‹å®ç°

è®©æˆ‘ä»¬çœ‹çœ‹ NanoClaw æ˜¯å¦‚ä½•åœ¨ä»£ç å±‚é¢å®ç° Progressive Disclosure çš„ï¼š

```typescript
// src/skills/loader.ts - ç®€åŒ–çš„æ ¸å¿ƒå®ç°

import { readFileSync, readdirSync } from 'fs';
import { parse } from 'yaml-front-matter';

interface SkillMetadata {
  skill_id: string;
  name: string;
  description: string;
  version: string;
  tags: string[];
  // ... å…¶ä»–å…ƒæ•°æ®å­—æ®µ
}

interface LoadedSkill {
  metadata: SkillMetadata;
  // æ³¨æ„ï¼šè¿™é‡Œä¸åŒ…å«å®Œæ•´æŒ‡ä»¤å†…å®¹ï¼
  // åªä¿å­˜æ–‡ä»¶è·¯å¾„ï¼Œéœ€è¦æ—¶æ‰åŠ è½½
  contentPath: string;
}

/**
 * ç¬¬ä¸€å±‚åŠ è½½ï¼šåªåŠ è½½å…ƒæ•°æ®å±‚ï¼ˆMetadata Layerï¼‰
 * è¿™ä¸ªå‡½æ•°åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è°ƒç”¨ï¼Œåº”è¯¥å°½å¯èƒ½å¿«ã€å ç”¨å°½å¯èƒ½å°‘çš„èµ„æº
 */
export function loadSkillMetadata(): Map<string, LoadedSkill> {
  const skillsDir = '.claude/skills';
  const skills = new Map<string, LoadedSkill>();

  // éå†æ‰€æœ‰æŠ€èƒ½ç›®å½•
  const skillDirs = readdirSync(skillsDir, { withFileTypes: true })
    .filter(dirent => dirent.isDirectory())
    .map(dirent => dirent.name);

  for (const skillDir of skillDirs) {
    const skillPath = `${skillsDir}/${skillDir}/SKILL.md`;

    try {
      // åªè¯»å–æ–‡ä»¶çš„å‰1000ä¸ªå­—ç¬¦ï¼ˆè¶³å¤ŸåŒ…å«YAML Frontmatterï¼‰
      // è¿™æ˜¯ä¸€ä¸ªå…³é”®çš„ä¼˜åŒ–ï¼šæˆ‘ä»¬ä¸éœ€è¦è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼
      const fd = readFileSync(skillPath, 'utf-8');
      const frontMatterMatch = fd.match(/^---\n([\s\S]*?)\n---/);

      if (!frontMatterMatch) {
        console.warn(`Skill ${skillDir} missing frontmatter`);
        continue;
      }

      // è§£æYAMLå…ƒæ•°æ®
      const metadata = parse(frontMatterMatch[0]) as SkillMetadata;

      // åªä¿å­˜å…ƒæ•°æ®å’Œæ–‡ä»¶è·¯å¾„ï¼Œä¸ä¿å­˜å®Œæ•´å†…å®¹
      skills.set(metadata.skill_id, {
        metadata,
        contentPath: skillPath,
      });

      console.log(`Loaded skill metadata: ${metadata.skill_id}`);

    } catch (error) {
      console.error(`Failed to load skill ${skillDir}:`, error);
    }
  }

  console.log(`Total skills loaded: ${skills.size}`);
  return skills;
}

/**
 * ç¬¬äºŒå±‚åŠ è½½ï¼šæŒ‰éœ€åŠ è½½å®Œæ•´æŒ‡ä»¤å±‚ï¼ˆFull Instructionsï¼‰
 * è¿™ä¸ªå‡½æ•°åœ¨ç”¨æˆ·è§¦å‘ç‰¹å®šæŠ€èƒ½æ—¶è°ƒç”¨
 */
export async function loadFullSkill(
  skillId: string,
  skills: Map<string, LoadedSkill>
): Promise<{ metadata: SkillMetadata; content: string } | null> {
  const skill = skills.get(skillId);

  if (!skill) {
    console.error(`Skill ${skillId} not found`);
    return null;
  }

  try {
    // ç°åœ¨æ‰è¯»å–å®Œæ•´çš„æ–‡ä»¶å†…å®¹ï¼
    const fullContent = readFileSync(skill.contentPath, 'utf-8');

    console.log(`Full skill loaded: ${skillId}`);
    console.log(`Content size: ${fullContent.length} characters`);
    console.log(`Estimated tokens: ~${Math.round(fullContent.length / 4)} tokens`);

    return {
      metadata: skill.metadata,
      content: fullContent,
    };

  } catch (error) {
    console.error(`Failed to load full skill ${skillId}:`, error);
    return null;
  }
}

/**
 * ç¬¬ä¸‰å±‚åŠ è½½ï¼šæŒ‰éœ€åŠ è½½å…³è”èµ„æºï¼ˆLinked Resourcesï¼‰
 * è¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“æŒ‡ä»¤å¼•ç”¨å¤–éƒ¨èµ„æºæ—¶è°ƒç”¨
 */
export async function loadSkillResource(
  skillId: string,
  resourcePath: string,
  skills: Map<string, LoadedSkill>
): Promise<string | null> {
  const skill = skills.get(skillId);

  if (!skill) {
    return null;
  }

  // æ„å»ºèµ„æºçš„å®Œæ•´è·¯å¾„
  const skillDir = skill.contentPath.replace('/SKILL.md', '');
  const fullResourcePath = `${skillDir}/${resourcePath}`;

  try {
    const resourceContent = readFileSync(fullResourcePath, 'utf-8');

    console.log(`Resource loaded: ${skillId}/${resourcePath}`);
    console.log(`Size: ${resourceContent.length} characters`);

    return resourceContent;

  } catch (error) {
    console.error(`Failed to load resource ${resourcePath} for skill ${skillId}:`, error);
    return null;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
async function demonstrateProgressiveDisclosure() {
  console.log('=== Stage 1: System Startup ===');
  console.log('Loading skill metadata (lightweight)...');

  // ç¬¬ä¸€å±‚åŠ è½½ï¼šåªåŠ è½½å…ƒæ•°æ®
  const skills = loadSkillMetadata();

  console.log(`\nâœ“ Loaded ${skills.size} skill metadata entries`);
  console.log(`âœ“ Token overhead: ~${skills.size * 75} tokens (negligible)`);
  console.log('âœ“ System ready for skill invocation\n');

  // æ¨¡æ‹Ÿç”¨æˆ·è§¦å‘æŠ€èƒ½
  const userCommand = '/add-telegram';
  console.log(`=== Stage 2: User Invocation ===`);
  console.log(`User input: "${userCommand}"`);
  console.log('Matching against skill metadata...\n');

  const targetSkillId = 'add-telegram';
  const skill = skills.get(targetSkillId);

  if (!skill) {
    console.error(`âœ— Skill "${targetSkillId}" not found`);
    return;
  }

  console.log(`âœ“ Matched skill: ${skill.metadata.name}`);
  console.log(`âœ“ Description: ${skill.metadata.description.split('\n')[0]}`);
  console.log('\n=== Stage 3: Full Skill Loading ===');
  console.log('Loading full skill content (on-demand)...\n');

  // ç¬¬äºŒå±‚åŠ è½½ï¼šæŒ‰éœ€åŠ è½½å®Œæ•´æŒ‡ä»¤
  const fullSkill = await loadFullSkill(targetSkillId, skills);

  if (!fullSkill) {
    console.error('âœ— Failed to load full skill');
    return;
  }

  console.log(`âœ“ Full skill loaded`);
  console.log(`âœ“ Content size: ${fullSkill.content.length} characters`);
  console.log(`âœ“ Estimated tokens: ~${Math.round(fullSkill.content.length / 4)}`);
  console.log(`âœ“ Token overhead compared to metadata: ~${Math.round((fullSkill.content.length / 4) / 75)}x`);

  console.log('\n=== Stage 4: Skill Execution ===');
  console.log('Claude Code now has:');
  console.log('  1. Full skill instructions in context');
  console.log('  2. Current codebase state');
  console.log('  3. Ability to read/write files');
  console.log('\nClaude will:');
  console.log('  1. Parse the step-by-step guide');
  console.log('  2. Execute each step (read â†’ modify â†’ write)');
  console.log('  3. Run verification after each step');
  console.log('  4. Rollback if verification fails');

  console.log('\n=== Summary ===');
  console.log('Progressive Disclosure in action:');
  console.log(`  â€¢ Startup: ${skills.size} skills metadata loaded (${skills.size * 75} tokens)`);
  console.log(`  â€¢ Invocation: 1 skill fully loaded (~${Math.round(fullSkill.content.length / 4)} tokens)`);
  console.log(`  â€¢ Efficiency: Only ${((1/skills.size)*100).toFixed(1)}% of skills loaded, but 100% functionality available`);
}

// è¿è¡Œæ¼”ç¤º
demonstrateProgressiveDisclosure().catch(console.error);
```

#### 3.3.3 å¯¹æ¯”ä¼ ç»Ÿæ¨¡å¼ï¼šæ•ˆç‡çš„é‡åŒ–åˆ†æ

è®©æˆ‘ä»¬ç”¨å…·ä½“æ•°å­—æ¥è¯´æ˜ Progressive Disclosure ç›¸æ¯”ä¼ ç»Ÿæ¨¡å¼çš„ä¼˜åŠ¿ï¼š

```
åœºæ™¯è®¾ç½®ï¼š
- ä¸Šä¸‹æ–‡çª—å£ï¼š100K tokensï¼ˆClaude 3.5 Sonnetï¼‰
- å¹³å‡æ¯ä¸ª Skill å…ƒæ•°æ®ï¼š75 tokens
- å¹³å‡æ¯ä¸ª Skill å®Œæ•´æŒ‡ä»¤ï¼š3,500 tokens
- å¹³å‡æ¯ä¸ª Skill å…³è”èµ„æºï¼š1,000 tokensï¼ˆæŒ‰éœ€ï¼‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
åœºæ™¯ Aï¼šä¼ ç»Ÿæ¨¡å¼ï¼ˆå…¨é‡åŠ è½½ï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç”¨æˆ·å®‰è£…äº† 10 ä¸ª Skills
ç³»ç»Ÿéœ€è¦åŒæ—¶åŠ è½½æ‰€æœ‰ Skills çš„å®Œæ•´æŒ‡ä»¤ï¼ˆå‡†å¤‡éšæ—¶ä½¿ç”¨ï¼‰

Token å ç”¨ = 10 Ã— 3,500 = 35,000 tokens (35%)

é—®é¢˜ï¼š
âœ— 35% çš„ä¸Šä¸‹æ–‡è¢«å›ºå®šå ç”¨ï¼Œæ— æ³•ç”¨äºå¯¹è¯
âœ— å³ä½¿å½“å‰åªä½¿ç”¨ 1 ä¸ª Skillï¼Œå…¶ä»– 9 ä¸ªä¹Ÿå ç”¨ç©ºé—´
âœ— éšç€ Skills å¢åŠ ï¼Œå¯ç”¨ä¸Šä¸‹æ–‡çº¿æ€§å‡å°‘
âœ— 100 ä¸ª Skills = 350,000 tokens > ä¸Šä¸‹æ–‡çª—å£ï¼ˆç³»ç»Ÿæ— æ³•è¿è¡Œï¼ï¼‰


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
åœºæ™¯ Bï¼šProgressive Disclosure æ¨¡å¼ï¼ˆNanoClaw å®é™…ä½¿ç”¨ï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç”¨æˆ·å®‰è£…äº† 10 ä¸ª Skills
ç³»ç»ŸåªåŠ è½½å…ƒæ•°æ®å±‚ï¼Œå®Œæ•´æŒ‡ä»¤å±‚æŒ‰éœ€åŠ è½½

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 1ï¼šç©ºé—²çŠ¶æ€ï¼ˆç”¨æˆ·æœªè§¦å‘ä»»ä½• Skillï¼‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Token å ç”¨ = 10 Ã— 75 = 750 tokens (0.75%)
èŠ‚çœ = 35,000 - 750 = 34,250 tokens (98% èŠ‚çœï¼)

ä¼˜åŠ¿ï¼š
âœ“ 99.25% çš„ä¸Šä¸‹æ–‡å¯ç”¨äºå¯¹è¯
âœ“ ç³»ç»Ÿå¯ä»¥åŒæ—¶æŒ‚è½½æ•°åƒä¸ª Skills è€Œä¸å½±å“æ€§èƒ½
âœ“ å¯åŠ¨é€Ÿåº¦å¿«ï¼ˆåªéœ€åŠ è½½å°‘é‡å…ƒæ•°æ®ï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 2ï¼šæ‰§è¡Œå•ä¸ª Skillï¼ˆå¦‚ /add-telegramï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Token å ç”¨ = (10 Ã— 75) + 3,500 = 4,250 tokens (4.25%)
èŠ‚çœ = 35,000 - 4,250 = 30,750 tokens (88% èŠ‚çœï¼)

ä¼˜åŠ¿ï¼š
âœ“ åªåŠ è½½éœ€è¦çš„ Skill å®Œæ•´æŒ‡ä»¤
âœ“ å…¶ä»– 9 ä¸ª Skills åªå ç”¨æå°çš„å…ƒæ•°æ®ç©ºé—´
âœ“ 95.75% çš„ä¸Šä¸‹æ–‡ä»ç„¶å¯ç”¨äºå¯¹è¯

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 3ï¼šæ‰§è¡Œå¤æ‚ Skillï¼ˆéœ€è¦å…³è”èµ„æºï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Token å ç”¨ = (10 Ã— 75) + 3,500 + 1,000 = 5,250 tokens (5.25%)
ä»ç„¶æ¯”ä¼ ç»Ÿæ¨¡å¼èŠ‚çœ 85%ï¼


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
åœºæ™¯ Cï¼šå¤§è§„æ¨¡éƒ¨ç½²ï¼ˆ100 ä¸ª Skillsï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ä¼ ç»Ÿæ¨¡å¼ï¼š
100 Ã— 3,500 = 350,000 tokens (350% > ä¸Šä¸‹æ–‡çª—å£ï¼)
â†’ ç³»ç»Ÿæ ¹æœ¬æ— æ³•è¿è¡Œï¼

Progressive Disclosureï¼š
- ç©ºé—²ï¼š100 Ã— 75 = 7,500 tokens (7.5%)
- æ‰§è¡Œå•ä¸ªï¼š7,500 + 3,500 = 11,000 tokens (11%)
- æ‰§è¡Œå¤šä¸ªï¼ˆå¹¶å‘ï¼‰ï¼šæ ¹æ®å®é™…å¹¶å‘æ•°çº¿æ€§å¢é•¿

â†’ å³ä½¿ 1000 ä¸ª Skills ä¹Ÿèƒ½é«˜æ•ˆç®¡ç†ï¼


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
é‡åŒ–ç»“è®º
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Progressive Disclosure ç›¸æ¯”ä¼ ç»Ÿå…¨é‡åŠ è½½æ¨¡å¼ï¼š

1. ç©ºé—²çŠ¶æ€ Token æ•ˆç‡æå‡ï¼š46x (98% èŠ‚çœ)
2. å• Skill æ‰§è¡Œ Token æ•ˆç‡æå‡ï¼š8x (88% èŠ‚çœ)
3. æ”¯æŒçš„æœ€å¤§ Skill æ•°é‡ï¼šä» ~28 æå‡åˆ° ~1000+ (35x)
4. ä¸Šä¸‹æ–‡ç•™ç»™å®é™…å¯¹è¯çš„æ¯”ä¾‹ï¼šä» 65% æå‡åˆ° 95%+

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ NanoClaw å¯ä»¥æŒ‚è½½æˆç™¾ä¸Šåƒä¸ª Skills è€Œä¸ä¼šæ‹–å®ç³»ç»Ÿâ€”â€”
å› ä¸º Progressive Disclosure ç¡®ä¿åªæœ‰çœŸæ­£éœ€è¦çš„ä»£ç æ‰ä¼šè¢«åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚
```

### 3.4 Skillsåè®®çš„è¡Œä¸šæ„ä¹‰

Skillsåè®®ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯å®ç°ï¼Œå®ƒä»£è¡¨äº†ä¸€ç§å…¨æ–°çš„å¼€æºåä½œèŒƒå¼ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨å®ƒçš„è¡Œä¸šæ„ä¹‰ã€‚

#### 3.4.1 ä»ä»£ç å…±äº«åˆ°çŸ¥è¯†å…±äº«

**ä¼ ç»Ÿå¼€æºæ¨¡å¼**ï¼š
- è´¡çŒ®è€…ç¼–å†™ä»£ç ï¼Œæäº¤PR
- ç»´æŠ¤è€…å®¡æ ¸ã€åˆå¹¶ã€å‘å¸ƒ
- ç”¨æˆ·ä¸‹è½½ã€å®‰è£…ã€é…ç½®
- ä»£ç æ˜¯æ ¸å¿ƒèµ„äº§

**Skillsæ¨¡å¼**ï¼š
- è´¡çŒ®è€…ç¼–å†™Skillï¼ˆçŸ¥è¯†/æ–¹æ³•ï¼‰
- ç”¨æˆ·åœ¨è‡ªå·±çš„ä»£ç åº“ä¸Šæ‰§è¡ŒSkill
- ç”Ÿæˆçš„ä»£ç æ˜¯ç‰¹å®šäºç”¨æˆ·éœ€æ±‚çš„
- **çŸ¥è¯†æ˜¯æ ¸å¿ƒèµ„äº§ï¼Œä»£ç æ˜¯å‰¯äº§å“**

è¿™ç§è½¬å˜çš„æ„ä¹‰ï¼š
1. **çŸ¥è¯†æ¯”ä»£ç æ›´æŒä¹…**ï¼šAPIä¼šå˜åŒ–ï¼Œæ¡†æ¶ä¼šè¿‡æ—¶ï¼Œä½†"å¦‚ä½•æ·»åŠ Telegramæ”¯æŒ"çš„çŸ¥è¯†æ˜¯æ°¸æ’çš„
2. **çŸ¥è¯†æ›´å®¹æ˜“å…±äº«**ï¼šå†™ä¸€ä¸ªSkillæ¯”ç»´æŠ¤ä¸€ä¸ªæ’ä»¶ç®€å•å¾—å¤š
3. **çŸ¥è¯†æ›´å®¹æ˜“å®šåˆ¶**ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹Skillçš„æ‰§è¡Œè¿‡ç¨‹

#### 3.4.2 ä»é›†ä¸­å¼åˆ°åˆ†å¸ƒå¼

**ä¼ ç»Ÿæ¨¡å¼**ï¼š
- æœ‰ä¸€ä¸ª"å®˜æ–¹"ç‰ˆæœ¬
- æ‰€æœ‰ç”¨æˆ·éƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç 
- å®šåˆ¶åŒ–é€šè¿‡é…ç½®å®ç°
- ç»´æŠ¤è€…æœ‰å·¨å¤§çš„è´£ä»»ï¼ˆä¸€ä¸ªbugå½±å“æ‰€æœ‰äººï¼‰

**Skillsæ¨¡å¼**ï¼š
- æ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„"å®˜æ–¹"ç‰ˆæœ¬
- æ¯ä¸ªç”¨æˆ·çš„ä»£ç éƒ½æ˜¯ä¸ºè‡ªå·±çš„éœ€æ±‚å®šåˆ¶çš„
- å®šåˆ¶åŒ–é€šè¿‡ä»£ç ç”Ÿæˆå®ç°
- è´£ä»»åˆ†æ•£ï¼ˆä¸€ä¸ªç”¨æˆ·çš„bugä¸å½±å“å…¶ä»–äººï¼‰

è¿™ç§è½¬å˜çš„æ„ä¹‰ï¼š
1. **æ²¡æœ‰"ä¸€åˆ€åˆ‡"çš„è§£å†³æ–¹æ¡ˆ**ï¼šæ¯ä¸ªç”¨æˆ·å¾—åˆ°æœ€é€‚åˆè‡ªå·±çš„ä»£ç 
2. **æ›´å¿«çš„è¿­ä»£**ï¼šä¸éœ€è¦ç­‰å¾…å®˜æ–¹å‘å¸ƒï¼Œç”¨æˆ·å¯ä»¥ç«‹å³æ‰§è¡ŒSkillè·å¾—æ–°åŠŸèƒ½
3. **æ›´é«˜çš„å¯é æ€§**ï¼šä¸€ä¸ªç”¨æˆ·çš„é”™è¯¯ä¸ä¼šå½±å“æ•´ä¸ªç¤¾åŒº

#### 3.4.3 ä»å…¼å®¹æ€§åˆ°å¯å˜æ€§

**ä¼ ç»Ÿæ¨¡å¼**ï¼š
- å‡çº§éœ€è¦è€ƒè™‘å‘åå…¼å®¹æ€§
- æ—§ç‰ˆæœ¬éœ€è¦è¢«æ”¯æŒ
- APIå˜æ›´éœ€è¦ deprecation å‘¨æœŸ
- æŠ€æœ¯å€ºåŠ¡ç´¯ç§¯

**Skillsæ¨¡å¼**ï¼š
- æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯"æ–°é²œç”Ÿæˆ"çš„
- ä¸éœ€è¦ç»´æŠ¤æ—§ç‰ˆæœ¬
- APIå˜æ›´åªéœ€è¦æ›´æ–°Skill
- æ— æŠ€æœ¯å€ºåŠ¡ç´¯ç§¯

è¿™ç§è½¬å˜çš„æ„ä¹‰ï¼š
1. **è‡ªç”±çš„é‡æ„**ï¼šå¯ä»¥éšæ—¶æ”¹å˜æ¶æ„ï¼Œä¸éœ€è¦æ‹…å¿ƒç ´åæ—§ä»£ç 
2. **æœ€æ–°çš„æœ€ä½³å®è·µ**ï¼šæ¯æ¬¡ç”Ÿæˆçš„ä»£ç éƒ½ä½¿ç”¨å½“å‰çš„æœ€ä½³å®è·µ
3. **æ— æŠ€æœ¯å€ºåŠ¡**ï¼šæ²¡æœ‰é—ç•™ä»£ç éœ€è¦ç»´æŠ¤

### 3.5 Skillsåè®®å¯¹è½¯ä»¶å·¥ç¨‹çš„å¯ç¤º

Skillsåè®®ä¸ä»…ä»…é€‚ç”¨äºNanoClawï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³å¯ä»¥åº”ç”¨åˆ°æ›´å¹¿æ³›çš„è½¯ä»¶å·¥ç¨‹å®è·µä¸­ã€‚

#### 3.5.1 ä»£ç å³é…ç½®ï¼ˆCode as Configurationï¼‰

ä¼ ç»Ÿï¼šç”¨é…ç½®æ–‡ä»¶æ§åˆ¶è¡Œä¸º
```yaml
# config.yaml
features:
  telegram: true
  voice_messages: false

behavior:
  response_style: "concise"
  max_length: 500
```

Skillsæ¨¡å¼ï¼šç”¨ä»£ç ç”Ÿæˆæ§åˆ¶è¡Œä¸º
```typescript
// ç”Ÿæˆçš„ä»£ç ç›´æ¥å®ç°æ‰€éœ€è¡Œä¸º
// æ²¡æœ‰"é…ç½®"ï¼Œåªæœ‰"ä»£ç "

// å¦‚æœéœ€è¦Telegramæ”¯æŒï¼Œä»£ç ä¸­å°±åŒ…å«Telegramå®ç°
// å¦‚æœä¸éœ€è¦ï¼Œä»£ç ä¸­å°±æ²¡æœ‰Telegramç›¸å…³é€»è¾‘

// å“åº”é£æ ¼ä¸æ˜¯é…ç½®é¡¹ï¼Œè€Œæ˜¯ç”Ÿæˆçš„ä»£ç é€»è¾‘
function formatResponse(text: string): string {
  // å®Œå…¨è‡ªå®šä¹‰çš„æ ¼å¼åŒ–é€»è¾‘
  return `ğŸ¤– **Response**\n\n${text}\n\n---\n_Generated just for you_`;
}
```

ä¼˜åŠ¿ï¼š
- çµæ´»æ€§ï¼šä»£ç å¯ä»¥è¡¨è¾¾ä»»æ„å¤æ‚çš„é€»è¾‘ï¼Œé…ç½®åªèƒ½è¡¨è¾¾é¢„å®šä¹‰çš„æ¨¡å¼
- å¯ç†è§£æ€§ï¼šç”Ÿæˆçš„ä»£ç æ˜¯å…·ä½“çš„ã€å¯è¯»çš„ï¼Œé…ç½®æ˜¯æŠ½è±¡çš„ã€éœ€è¦æ–‡æ¡£
- å¯è°ƒè¯•æ€§ï¼šå¯ä»¥å•æ­¥è°ƒè¯•ç”Ÿæˆçš„ä»£ç ï¼Œé…ç½®çš„é—®é¢˜å¾€å¾€éšè—åœ¨æ¡†æ¶ä¸­

#### 3.5.2 ç”Ÿæˆå¼ç¼–ç¨‹ï¼ˆGenerative Programmingï¼‰

ä¼ ç»Ÿï¼šç¨‹åºå‘˜ç›´æ¥ç¼–å†™æœ€ç»ˆä»£ç 
```typescript
// ç¨‹åºå‘˜ç›´æ¥å†™çš„ä»£ç 
class UserService {
  async getUser(id: string): Promise<User> {
    // å®ç°...
  }

  async createUser(data: CreateUserDTO): Promise<User> {
    // å®ç°...
  }

  // ç¨‹åºå‘˜éœ€è¦ä¸ºæ¯ä¸ªæ–¹æ³•å†™å®ç°
}
```

Skillsæ¨¡å¼ï¼šç¨‹åºå‘˜ç¼–å†™ç”Ÿæˆä»£ç çš„æŒ‡ä»¤
```markdown
## Generate User Service

Create a `UserService` class with the following methods:
- `getUser(id: string): Promise<User>`
- `createUser(data: CreateUserDTO): Promise<User>`
- `updateUser(id: string, data: UpdateUserDTO): Promise<User>`
- `deleteUser(id: string): Promise<void>`

For each method:
1. Add input validation
2. Add error handling
3. Add logging
4. Follow the existing code style

The User interface should include:
- id: string
- email: string
- name: string
- createdAt: Date
- updatedAt: Date
```

ç„¶åClaudeæ ¹æ®è¿™ä¸ªæŒ‡ä»¤ç”Ÿæˆå®é™…çš„ä»£ç ï¼š

```typescript
// ç”Ÿæˆçš„ä»£ç 
import { logger } from './logger';

export interface User {
  id: string;
  email: string;
  name: string;
  createdAt: Date;
  updatedAt: Date;
}

export interface CreateUserDTO {
  email: string;
  name: string;
}

export interface UpdateUserDTO {
  email?: string;
  name?: string;
}

export class UserService {
  async getUser(id: string): Promise<User> {
    try {
      logger.info({ userId: id }, 'Fetching user');

      if (!id) {
        throw new Error('User ID is required');
      }

      // Implementation here...
      const user: User = {
        id,
        email: 'user@example.com',
        name: 'John Doe',
        createdAt: new Date(),
        updatedAt: new Date(),
      };

      logger.info({ userId: id }, 'User fetched successfully');
      return user;

    } catch (error) {
      logger.error({ error, userId: id }, 'Failed to fetch user');
      throw error;
    }
  }

  async createUser(data: CreateUserDTO): Promise<User> {
    try {
      logger.info({ email: data.email }, 'Creating user');

      // Validation
      if (!data.email) {
        throw new Error('Email is required');
      }

      if (!data.name) {
        throw new Error('Name is required');
      }

      // Implementation...
      const user: User = {
        id: crypto.randomUUID(),
        email: data.email,
        name: data.name,
        createdAt: new Date(),
        updatedAt: new Date(),
      };

      logger.info({ userId: user.id }, 'User created successfully');
      return user;

    } catch (error) {
      logger.error({ error, data }, 'Failed to create user');
      throw error;
    }
  }

  // ... updateUser, deleteUser ç­‰æ–¹æ³•
}
```

ä¼˜åŠ¿ï¼š
- ç®€æ´æ€§ï¼šæŒ‡ä»¤æ¯”ç”Ÿæˆçš„ä»£ç ç®€çŸ­å¾—å¤šï¼ˆè¿™ä¸ªä¾‹å­ä¸­ï¼ŒæŒ‡ä»¤çº¦50è¡Œï¼Œç”Ÿæˆçš„ä»£ç çº¦300è¡Œï¼‰
- ä¸€è‡´æ€§ï¼šå¯ä»¥ç¡®ä¿æ‰€æœ‰ç”Ÿæˆçš„ä»£ç éµå¾ªç›¸åŒçš„æ¨¡å¼å’Œæœ€ä½³å®è·µ
- å¯ç»´æŠ¤æ€§ï¼šä¿®æ”¹æŒ‡ä»¤æ¯”ä¿®æ”¹åˆ†æ•£åœ¨å„å¤„çš„ä»£ç å®¹æ˜“å¾—å¤š
- å¯æ¼”åŒ–æ€§ï¼šå¯ä»¥æ”¹å˜ç”Ÿæˆç­–ç•¥ï¼Œä¸€æ¬¡æ€§æ›´æ–°æ‰€æœ‰ç”Ÿæˆçš„ä»£ç 

#### 3.5.3 è‡ªä¿®æ”¹ç³»ç»Ÿï¼ˆSelf-Modifying Systemsï¼‰

ä¼ ç»Ÿï¼šç³»ç»ŸåŠŸèƒ½æ˜¯é™æ€çš„ï¼Œç”±ç¨‹åºå‘˜é¢„å…ˆå®šä¹‰
```typescript
// ç³»ç»ŸåŠŸèƒ½æ˜¯å›ºå®šçš„
class App {
  features = ['whatsapp', 'scheduler', 'web_search'];

  // ç”¨æˆ·åªèƒ½ä½¿ç”¨è¿™äº›é¢„å®šä¹‰çš„åŠŸèƒ½
  // æƒ³è¦æ–°åŠŸèƒ½ï¼Ÿç­‰å¾…ç¨‹åºå‘˜å¼€å‘
}
```

Skillsæ¨¡å¼ï¼šç³»ç»ŸåŠŸèƒ½æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªæˆ‘ä¿®æ”¹
```typescript
// ç³»ç»ŸåŠŸèƒ½æ˜¯å¯å˜çš„
class App {
  features: string[] = loadCurrentFeatures(); // ä»å½“å‰ä»£ç çŠ¶æ€åŠ è½½

  // ç”¨æˆ·å¯ä»¥é€šè¿‡æ‰§è¡ŒSkillæ·»åŠ æ–°åŠŸèƒ½
  // ç³»ç»Ÿè‡ªæˆ‘ä¿®æ”¹ï¼Œä¸éœ€è¦ç­‰å¾…å¤–éƒ¨å¼€å‘

  async executeSkill(skillId: string) {
    const skill = await loadSkill(skillId);

    // Claude æ ¹æ® Skill æŒ‡ä»¤ä¿®æ”¹å½“å‰ä»£ç 
    await this.applyCodeTransformation(skill);

    // é‡æ–°åŠ è½½åŠŸèƒ½åˆ—è¡¨
    this.features = loadCurrentFeatures();

    // ç³»ç»Ÿç°åœ¨æ‹¥æœ‰äº†æ–°åŠŸèƒ½ï¼
  }
}
```

ä¼˜åŠ¿ï¼š
- é€‚åº”æ€§ï¼šç³»ç»Ÿå¯ä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚ï¼Œè€Œä¸éœ€è¦äººå·¥å¹²é¢„
- ä¸ªæ€§åŒ–ï¼šæ¯ä¸ªç³»ç»Ÿå®ä¾‹éƒ½å¯ä»¥æ ¹æ®ç”¨æˆ·çš„ç‰¹å®šéœ€æ±‚å®šåˆ¶
- æ¼”è¿›æ€§ï¼šç³»ç»Ÿå¯ä»¥è‡ªæˆ‘æ”¹è¿›ï¼Œå­¦ä¹ æ–°çš„æœ€ä½³å®è·µ
- è‡ªä¸»æ€§ï¼šå‡å°‘äº†å¯¹å¤–éƒ¨å¼€å‘çš„ä¾èµ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªä¸»åœ°æ‰©å±•ç³»ç»Ÿ

---

## å››ã€å®è·µå»ºè®®ï¼šå¦‚ä½•åº”ç”¨Skillsæ€æƒ³

Skillsåè®®çš„æ€æƒ³ä¸ä»…é€‚ç”¨äºNanoClawï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ°æ›´å¹¿æ³›çš„è½¯ä»¶å·¥ç¨‹å®è·µä¸­ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®è·µå»ºè®®ã€‚

### 4.1 ä½•æ—¶è€ƒè™‘ç±»ä¼¼Skillsçš„æ¶æ„

**é€‚ç”¨åœºæ™¯**ï¼š

1. **åŠŸèƒ½é«˜åº¦å¯å®šåˆ¶åŒ–**
   - æ¯ä¸ªç”¨æˆ·çš„éœ€æ±‚å·®å¼‚å¾ˆå¤§
   - æ²¡æœ‰"æ ‡å‡†"çš„ä½¿ç”¨æ–¹å¼
   - ä¾‹å­ï¼šä¸ªäººè‡ªåŠ¨åŒ–å·¥å…·ã€å®šåˆ¶åŒ–æŠ¥å‘Šç”Ÿæˆã€ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ

2. **ä»£ç åº“è†¨èƒ€å¯¼è‡´ç»´æŠ¤å›°éš¾**
   - ä»£ç åº“éšåŠŸèƒ½å¢åŠ è€Œå¿«é€Ÿå¢é•¿
   - ç†è§£æ•´ä¸ªä»£ç åº“çš„æˆæœ¬è¶Šæ¥è¶Šé«˜
   - ä¾‹å­ï¼šæ‹¥æœ‰100+æ’ä»¶çš„CMSç³»ç»Ÿã€æ”¯æŒ50+é›†æˆç‚¹çš„SaaSå¹³å°

3. **éœ€è¦å¿«é€Ÿå“åº”å¤šæ ·åŒ–éœ€æ±‚**
   - å¸‚åœºéœ€æ±‚å˜åŒ–å¿«
   - éœ€è¦å¿«é€Ÿæ¨å‡ºæ–°åŠŸèƒ½å˜ä½“
   - ä¾‹å­ï¼šç”µå•†å¹³å°çš„ä¿ƒé”€å·¥å…·ã€è¥é”€è‡ªåŠ¨åŒ–å·¥å…·

4. **å›¢é˜Ÿæœ‰èƒ½åŠ›ç»´æŠ¤å¤šä¸ªå®šåˆ¶åŒ–ç‰ˆæœ¬**
   - æœ‰è¶³å¤Ÿçš„æŠ€æœ¯äººå‘˜
   - æœ‰æˆç†Ÿçš„DevOpsæµç¨‹
   - ä¾‹å­ï¼šä¼ä¸šçº§è½¯ä»¶å…¬å¸ã€å®šåˆ¶åŒ–æœåŠ¡æä¾›å•†

**ä¸é€‚ç”¨åœºæ™¯**ï¼š

1. **åŠŸèƒ½æ ‡å‡†åŒ–ï¼Œç”¨æˆ·å®šåˆ¶éœ€æ±‚å°‘**
   - å¤§å¤šæ•°ç”¨æˆ·ä»¥ç›¸åŒæ–¹å¼ä½¿ç”¨
   - ä¾‹å­ï¼šè®¡ç®—å™¨ã€å¤©æ°”é¢„æŠ¥åº”ç”¨

2. **å›¢é˜Ÿè§„æ¨¡å°ï¼Œæ— æ³•ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬**
   - æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºç®¡ç†å®šåˆ¶åŒ–
   - ä¾‹å­ï¼šåˆåˆ›å…¬å¸ã€ä¸ªäººå¼€å‘è€…çš„å°é¡¹ç›®

3. **éœ€è¦ä¸¥æ ¼çš„ç‰ˆæœ¬æ§åˆ¶å’Œå…¼å®¹æ€§ä¿è¯**
   - å¿…é¡»ç¬¦åˆç‰¹å®šæ ‡å‡†
   - ä¾‹å­ï¼šé‡‘èç³»ç»Ÿã€åŒ»ç–—è®¾å¤‡è½¯ä»¶

### 4.2 æ¸è¿›å¼é‡‡ç”¨ç­–ç•¥

ä¸è¦è¯•å›¾ä¸€æ¬¡æ€§å®Œå…¨è½¬å‘Skillsæ¨¡å¼ã€‚å»ºè®®åˆ†é˜¶æ®µæ¸è¿›å¼é‡‡ç”¨ï¼š

**é˜¶æ®µ1ï¼šå®éªŒï¼ˆ1-2ä¸ªskillsï¼Œ1-2ä¸ªæœˆï¼‰**

ç›®æ ‡ï¼šéªŒè¯Skillsæ¨¡å¼åœ¨ä½ çš„åœºæ™¯ä¸­æ˜¯å¦æœ‰æ•ˆ

è¡ŒåŠ¨ï¼š
- é€‰æ‹©1-2ä¸ªæœ€å¸¸ç”¨çš„å®šåˆ¶éœ€æ±‚
- ç¼–å†™å¯¹åº”çš„Skillæ–‡ä»¶
- åœ¨å°èŒƒå›´å†…æµ‹è¯•ï¼ˆä¾‹å¦‚å†…éƒ¨å›¢é˜Ÿï¼‰

æˆåŠŸæ ‡å‡†ï¼š
- Skillå¯ä»¥æˆåŠŸæ‰§è¡Œ
- ç”Ÿæˆçš„ä»£ç ç¬¦åˆé¢„æœŸ
- å›¢é˜Ÿå¯¹æµç¨‹æ„Ÿåˆ°æ»¡æ„

**é˜¶æ®µ2ï¼šéªŒè¯ï¼ˆ5-10ä¸ªskillsï¼Œ3-6ä¸ªæœˆï¼‰**

ç›®æ ‡ï¼šå»ºç«‹å®Œæ•´çš„Skillç”Ÿæ€ç³»ç»Ÿ

è¡ŒåŠ¨ï¼š
- æ‰©å±•Skillåº“åˆ°è¦†ç›–ä¸»è¦ä½¿ç”¨åœºæ™¯
- å»ºç«‹Skillç¼–å†™è§„èŒƒå’Œæœ€ä½³å®è·µ
- å»ºç«‹Skillå®¡æ ¸æœºåˆ¶
- æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶è¿­ä»£

æˆåŠŸæ ‡å‡†ï¼š
- 80%çš„å¸¸è§éœ€æ±‚å¯ä»¥é€šè¿‡ç°æœ‰Skillsæ»¡è¶³
- Skillè´¨é‡ç¨³å®šï¼Œé”™è¯¯ç‡ä½
- ç”¨æˆ·å¯ä»¥è‡ªä¸»åœ°é€‰æ‹©å’Œä½¿ç”¨Skills

**é˜¶æ®µ3ï¼šå…¨é¢é‡‡ç”¨ï¼ˆæ‰€æœ‰å®šåˆ¶é€šè¿‡skillï¼Œ6-12ä¸ªæœˆï¼‰**

ç›®æ ‡ï¼šå®Œå…¨è½¬å‘Skillsæ¨¡å¼

è¡ŒåŠ¨ï¼š
- æ‰€æœ‰æ–°åŠŸèƒ½é€šè¿‡Skillå®ç°
- å†»ç»“åŸæœ‰æ’ä»¶/æ‰©å±•ç³»ç»Ÿçš„å¼€å‘
- æä¾›è¿ç§»è·¯å¾„å¸®åŠ©ç°æœ‰ç”¨æˆ·è¿ç§»
- å»ºç«‹Skillså¸‚åœºå’Œç¤¾åŒº

æˆåŠŸæ ‡å‡†ï¼š
- 95%ä»¥ä¸Šçš„å®šåˆ¶åŒ–é€šè¿‡Skillså®Œæˆ
- ä»£ç åº“ä½“ç§¯åœæ­¢å¢é•¿æˆ–å¼€å§‹ä¸‹é™
- æ–°åŠŸèƒ½ä¸Šçº¿é€Ÿåº¦æå‡50%ä»¥ä¸Š

### 4.3 å…³é”®æˆåŠŸå› ç´ 

åŸºäºNanoClawçš„å®è·µï¼Œä»¥ä¸‹æ˜¯æˆåŠŸå®æ–½Skillsæ¨¡å¼çš„å…³é”®å› ç´ ï¼š

**1. æ¸…æ™°çš„å…ƒæ•°æ®**

å…ƒæ•°æ®å±‚æ˜¯ç”¨æˆ·ä¸Skillsäº¤äº’çš„ç¬¬ä¸€è§¦ç‚¹ï¼Œå¿…é¡»å‡†ç¡®ã€å®Œæ•´ã€‚

å¥½çš„å…ƒæ•°æ®ç¤ºä¾‹ï¼š
```yaml
skill_id: add-telegram
name: Add Telegram Support
description: |
  ## What
  Adds Telegram Bot API integration as a communication channel.

  ## When to Use
  - User wants to use Telegram instead of WhatsApp
  - User wants to add Telegram alongside WhatsApp

  ## Prerequisites
  - User must have Telegram Bot Token from @BotFather

  ## Result
  - Messages from Telegram will be routed to the agent
  - Agent responses will be sent back to Telegram

tags: [channel, telegram, messaging]
version: 1.0.0
```

**2. è¯¦å°½çš„æŒ‡ä»¤**

å®Œæ•´æŒ‡ä»¤å±‚æ˜¯SkillæˆåŠŸæ‰§è¡Œçš„ä¿éšœï¼Œå¿…é¡»å…·ä½“ã€å¯æ‰§è¡Œã€‚

å¥½çš„æŒ‡ä»¤ç»“æ„ï¼š
```markdown
## Step N: [å…·ä½“åšä»€ä¹ˆ]

### Action
[æ¸…æ™°æè¿°è¦åšä»€ä¹ˆ]

### Code
[å®Œæ•´çš„ä»£ç ç¤ºä¾‹]

### Verification
[å¦‚ä½•éªŒè¯è¿™ä¸€æ­¥æˆåŠŸ]
```bash
# éªŒè¯å‘½ä»¤
```

### Rollback
[å¦‚æœå¤±è´¥ï¼Œå¦‚ä½•æ¢å¤]
```bash
# å›æ»šå‘½ä»¤
```
```

**3. æŒç»­çš„æµ‹è¯•**

Skillsä¸æ˜¯ä¸€æ¬¡æ€§çš„æ–‡æ¡£ï¼Œéœ€è¦æŒç»­æµ‹è¯•å’Œç»´æŠ¤ã€‚

æµ‹è¯•ç­–ç•¥ï¼š
- **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šå®šæœŸè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰Skillsï¼ŒéªŒè¯å®ƒä»¬ä»ç„¶æœ‰æ•ˆ
- **ç‰ˆæœ¬å…¼å®¹æ€§æµ‹è¯•**ï¼šå½“NanoClawæ›´æ–°æ—¶ï¼Œæµ‹è¯•æ‰€æœ‰Skillsæ˜¯å¦ä»ç„¶å…¼å®¹
- **ç¤¾åŒºåé¦ˆ**ï¼šå»ºç«‹æœºåˆ¶è®©ç”¨æˆ·æŠ¥å‘Šå¤±è´¥çš„Skills
- **å®šæœŸå®¡æŸ¥**ï¼šæ¯å­£åº¦å®¡æŸ¥æ‰€æœ‰Skillsï¼Œæ›´æ–°è¿‡æ—¶çš„å†…å®¹

---

## äº”ã€ç»“è¯­ï¼šä»NanoClawçœ‹åˆ°çš„æœªæ¥

NanoClawç»™æˆ‘ä»¬å±•ç¤ºäº†ä¸€ç§å¯èƒ½æ€§ï¼š**å½“AIèƒ½å¤Ÿç†è§£å’Œä¿®æ”¹ä»£ç ï¼Œè½¯ä»¶å¼€å‘ä¼šå˜æˆä»€ä¹ˆæ ·ï¼Ÿ**

### æ ¸å¿ƒæ´å¯Ÿå›é¡¾

**1. å®¹å™¨éš”ç¦»ä¸æ˜¯"å¯é€‰å®‰å…¨"ï¼Œè€Œæ˜¯"å¿…éœ€åŸºç¡€"**

å½“AI Agentæ‹¥æœ‰ç³»ç»Ÿçº§æ‰§è¡Œæƒé™æ—¶ï¼Œåº”ç”¨å±‚çš„å®‰å…¨å‡è®¾å·²ç»å¤±æ•ˆã€‚NanoClawçš„ç‰©ç†çº§å®¹å™¨éš”ç¦»åº”è¯¥æˆä¸ºæ‰€æœ‰ç±»ä¼¼ç³»ç»Ÿçš„æ ‡é…ï¼Œè€Œä¸æ˜¯å¯é€‰åŠŸèƒ½ã€‚

**2. Skillsåè®®ä»£è¡¨äº†ä¸€ç§æ–°çš„å¼€æºåä½œèŒƒå¼**

ä»"æäº¤PR"åˆ°"æ‰§è¡ŒSkill"ï¼Œä»"å…±äº«ä»£ç "åˆ°"å…±äº«çŸ¥è¯†"ï¼Œä»"é€šç”¨æ¡†æ¶"åˆ°"ä¸“ç”¨å®šåˆ¶"â€”â€”è¿™ç§è½¬å˜å¯èƒ½é¢„ç¤ºç€ä¸€ä¸ªæ–°æ—¶ä»£çš„åˆ°æ¥ï¼šåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œè½¯ä»¶çš„"åŠŸèƒ½"ä¸å†æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ï¼Œè€Œæ˜¯æ ¹æ®éœ€è¦å®æ—¶ç”Ÿæˆçš„ã€‚

**3. é˜²å¾¡æ€§ç¼–ç¨‹åœ¨AIæ—¶ä»£å˜å¾—æ›´åŠ é‡è¦**

Issue #30çš„æ•™è®­å‘Šè¯‰æˆ‘ä»¬ï¼šåœ¨ä¸ç¡®å®šçš„æ¨¡å‹æ¨ç†è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»åœ¨ä»£ç å±‚é¢å¼ºåˆ¶æ–½åŠ ç¡®å®šæ€§çš„å®‰å…¨ç»ˆæ­¢æ¡ä»¶ã€‚æ°¸è¿œä¸è¦å‡è®¾AIä¼šè‡ªå·±çŸ¥é“ä½•æ—¶åœæ­¢ã€‚

### ç»™å·¥ç¨‹å¸ˆçš„æ€è€ƒ

ä¸è¦åªçœ‹NanoClawçš„å…·ä½“å®ç°ï¼Œè¦çœ‹å®ƒèƒŒåçš„**è®¾è®¡æ€æƒ³**ï¼š

1. **ä½ çš„ç³»ç»Ÿåœ¨é¢å¯¹ä¸å¯ä¿¡è¾“å…¥æ—¶ï¼Œæœ‰å¤šå°‘ä¿¡å¿ƒï¼Ÿ**
   - å¦‚æœæœ‰ä¸€ä¸ªæ¶æ„çš„AI Agentè¯•å›¾æ”»å‡»ä½ çš„ç³»ç»Ÿï¼Œå®ƒèƒ½é€ æˆå¤šå¤§çš„ç ´åï¼Ÿ
   - NanoClawçš„ç­”æ¡ˆæ˜¯ï¼š"å³ä½¿Agentè¢«æ”»ç ´ï¼Œå®ƒä¹Ÿåªèƒ½è®¿é—®æ˜ç¡®æŒ‚è½½çš„ç›®å½•ï¼Œæ— æ³•å½±å“å…¶ä»–ç”¨æˆ·æˆ–ç³»ç»Ÿæœ¬èº«ã€‚"

2. **ä½ çš„ç³»ç»Ÿæ˜¯å¦æœ‰"æ¯ä¸ªç”¨æˆ·éƒ½æƒ³è¦ä¸åŒåŠŸèƒ½"çš„é—®é¢˜ï¼Ÿ**
   - å¦‚æœæ˜¯ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿæ˜¯é€šè¿‡ä¸æ–­å¢åŠ é…ç½®é€‰é¡¹ï¼Œè¿˜æ˜¯é€šè¿‡æ’ä»¶ç³»ç»Ÿï¼Ÿ
   - NanoClawçš„ç­”æ¡ˆæ˜¯ï¼š"æˆ‘ä»¬ä¸ç»´æŠ¤é€šç”¨ä»£ç åº“ï¼Œè€Œæ˜¯è®©æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰è‡ªå·±çš„ä¸“ç”¨ä»£ç åº“ã€‚"

3. **ä½ çš„ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿ"è‡ªæˆ‘ä¿®æ”¹"ï¼Ÿ**
   - å½“éœ€æ±‚å˜åŒ–æ—¶ï¼Œä½ çš„ç³»ç»Ÿèƒ½å¦è‡ªåŠ¨é€‚åº”ï¼Œè¿˜æ˜¯éœ€è¦äººå·¥å¹²é¢„ï¼Ÿ
   - NanoClawçš„ç­”æ¡ˆæ˜¯ï¼š"é€šè¿‡æ‰§è¡ŒSkillï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨æ·»åŠ æ–°åŠŸèƒ½ï¼Œæ— éœ€ç­‰å¾…å¤–éƒ¨å¼€å‘ã€‚"

### æœ€åçš„æ€è€ƒ

Skillsåè®®å¯èƒ½åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚æœªæ¥ï¼Œæˆ–è®¸æ‰€æœ‰çš„è½¯ä»¶éƒ½æ˜¯"è‡ªä¿®æ”¹"çš„â€”â€”å®ƒä»¬ä¸æ˜¯è¢«é¢„å…ˆç¼–å†™å¥½çš„ï¼Œè€Œæ˜¯æ ¹æ®éœ€è¦å®æ—¶ç”Ÿæˆçš„ã€‚åœ¨è¿™ä¸ªæœªæ¥é‡Œï¼Œç¨‹åºå‘˜çš„èŒè´£å¯èƒ½ä¸å†æ˜¯"ç¼–å†™ä»£ç "ï¼Œè€Œæ˜¯"ç¼–å†™ç”Ÿæˆä»£ç çš„æŒ‡ä»¤"â€”â€”ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©æ‰€è¯´çš„Skillsã€‚

é—®é¢˜æ˜¯ï¼š**ä½ å‡†å¤‡å¥½è¿æ¥è¿™ä¸ªæœªæ¥äº†å—ï¼Ÿ**

---

*æœ¬æ–‡åŸºäº NanoClaw é¡¹ç›®ï¼ˆhttps://github.com/qwibitai/nanoclawï¼‰çš„æ¶æ„è®¾è®¡ä¸å®è·µç»éªŒ*

*ä½œè€…ï¼š[ä½ çš„åå­—]*
*æ—¥æœŸï¼š2025å¹´2æœˆ*
